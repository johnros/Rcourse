<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 R Basics | R (BGU course)</title>
  <meta name="description" content="Class notes for the R course at the BGU’s IE&amp;M dept." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 R Basics | R (BGU course)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Class notes for the R course at the BGU’s IE&amp;M dept." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 R Basics | R (BGU course)" />
  
  <meta name="twitter:description" content="Class notes for the R course at the BGU’s IE&amp;M dept." />
  

<meta name="author" content="Jonathan D. Rosenblatt" />


<meta name="date" content="2019-09-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html">
<link rel="next" href="datatable.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/sequences-0.1/sequences.css" rel="stylesheet" />
<script src="libs/sunburst-binding-2.1.0/sunburst.js"></script>
<script src="libs/d3-5.7.0/d3.min.js"></script>
<script src="libs/d3-lasso-0.0.5/d3-lasso.min.js"></script>
<link href="libs/ggiraphjs-0.1.0/styles.css" rel="stylesheet" />
<script src="libs/ggiraphjs-0.1.0/ggiraphjs.min.js"></script>
<script src="libs/girafe-binding-0.6.0/girafe.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#notation-conventions"><i class="fa fa-check"></i><b>1.1</b> Notation Conventions</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>1.2</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#what-r"><i class="fa fa-check"></i><b>2.1</b> What is R?</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#ecosystem"><i class="fa fa-check"></i><b>2.2</b> The R Ecosystem</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#bibliographic-notes"><i class="fa fa-check"></i><b>2.3</b> Bibliographic Notes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a><ul>
<li class="chapter" data-level="3.0.1" data-path="basics.html"><a href="basics.html#other-ides"><i class="fa fa-check"></i><b>3.0.1</b> Other IDEs</a></li>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#file-types"><i class="fa fa-check"></i><b>3.1</b> File types</a></li>
<li class="chapter" data-level="3.2" data-path="basics.html"><a href="basics.html#simple-calculator"><i class="fa fa-check"></i><b>3.2</b> Simple calculator</a></li>
<li class="chapter" data-level="3.3" data-path="basics.html"><a href="basics.html#probability-calculator"><i class="fa fa-check"></i><b>3.3</b> Probability calculator</a></li>
<li class="chapter" data-level="3.4" data-path="basics.html"><a href="basics.html#getting-help"><i class="fa fa-check"></i><b>3.4</b> Getting Help</a></li>
<li class="chapter" data-level="3.5" data-path="basics.html"><a href="basics.html#variable-assignment"><i class="fa fa-check"></i><b>3.5</b> Variable Assignment</a></li>
<li class="chapter" data-level="3.6" data-path="basics.html"><a href="basics.html#missing"><i class="fa fa-check"></i><b>3.6</b> Missing</a></li>
<li class="chapter" data-level="3.7" data-path="basics.html"><a href="basics.html#piping"><i class="fa fa-check"></i><b>3.7</b> Piping</a></li>
<li class="chapter" data-level="3.8" data-path="basics.html"><a href="basics.html#vector-creation-and-manipulation"><i class="fa fa-check"></i><b>3.8</b> Vector Creation and Manipulation</a></li>
<li class="chapter" data-level="3.9" data-path="basics.html"><a href="basics.html#search-paths-and-packages"><i class="fa fa-check"></i><b>3.9</b> Search Paths and Packages</a></li>
<li class="chapter" data-level="3.10" data-path="basics.html"><a href="basics.html#simple-plotting"><i class="fa fa-check"></i><b>3.10</b> Simple Plotting</a></li>
<li class="chapter" data-level="3.11" data-path="basics.html"><a href="basics.html#object-types"><i class="fa fa-check"></i><b>3.11</b> Object Types</a></li>
<li class="chapter" data-level="3.12" data-path="basics.html"><a href="basics.html#data-frames"><i class="fa fa-check"></i><b>3.12</b> Data Frames</a></li>
<li class="chapter" data-level="3.13" data-path="basics.html"><a href="basics.html#exctraction"><i class="fa fa-check"></i><b>3.13</b> Exctraction</a></li>
<li class="chapter" data-level="3.14" data-path="basics.html"><a href="basics.html#augmentations-of-the-data.frame-class"><i class="fa fa-check"></i><b>3.14</b> Augmentations of the data.frame class</a></li>
<li class="chapter" data-level="3.15" data-path="basics.html"><a href="basics.html#data-import-and-export"><i class="fa fa-check"></i><b>3.15</b> Data Import and Export</a><ul>
<li class="chapter" data-level="3.15.1" data-path="basics.html"><a href="basics.html#import-from-web"><i class="fa fa-check"></i><b>3.15.1</b> Import from WEB</a></li>
<li class="chapter" data-level="3.15.2" data-path="basics.html"><a href="basics.html#import-from-clipboard"><i class="fa fa-check"></i><b>3.15.2</b> Import From Clipboard</a></li>
<li class="chapter" data-level="3.15.3" data-path="basics.html"><a href="basics.html#export-as-csv"><i class="fa fa-check"></i><b>3.15.3</b> Export as CSV</a></li>
<li class="chapter" data-level="3.15.4" data-path="basics.html"><a href="basics.html#export-non-csv-files"><i class="fa fa-check"></i><b>3.15.4</b> Export non-CSV files</a></li>
<li class="chapter" data-level="3.15.5" data-path="basics.html"><a href="basics.html#reading-from-text-files"><i class="fa fa-check"></i><b>3.15.5</b> Reading From Text Files</a></li>
<li class="chapter" data-level="3.15.6" data-path="basics.html"><a href="basics.html#writing-data-to-text-files"><i class="fa fa-check"></i><b>3.15.6</b> Writing Data to Text Files</a></li>
<li class="chapter" data-level="3.15.7" data-path="basics.html"><a href="basics.html#xlsx-files"><i class="fa fa-check"></i><b>3.15.7</b> .XLS(X) files</a></li>
<li class="chapter" data-level="3.15.8" data-path="basics.html"><a href="basics.html#massive-files"><i class="fa fa-check"></i><b>3.15.8</b> Massive files</a></li>
<li class="chapter" data-level="3.15.9" data-path="basics.html"><a href="basics.html#databases"><i class="fa fa-check"></i><b>3.15.9</b> Databases</a></li>
</ul></li>
<li class="chapter" data-level="3.16" data-path="basics.html"><a href="basics.html#functions"><i class="fa fa-check"></i><b>3.16</b> Functions</a></li>
<li class="chapter" data-level="3.17" data-path="basics.html"><a href="basics.html#looping"><i class="fa fa-check"></i><b>3.17</b> Looping</a></li>
<li class="chapter" data-level="3.18" data-path="basics.html"><a href="basics.html#apply"><i class="fa fa-check"></i><b>3.18</b> Apply</a></li>
<li class="chapter" data-level="3.19" data-path="basics.html"><a href="basics.html#recursion"><i class="fa fa-check"></i><b>3.19</b> Recursion</a></li>
<li class="chapter" data-level="3.20" data-path="basics.html"><a href="basics.html#strings"><i class="fa fa-check"></i><b>3.20</b> Strings</a></li>
<li class="chapter" data-level="3.21" data-path="basics.html"><a href="basics.html#dates-and-times"><i class="fa fa-check"></i><b>3.21</b> Dates and Times</a><ul>
<li class="chapter" data-level="3.21.1" data-path="basics.html"><a href="basics.html#dates"><i class="fa fa-check"></i><b>3.21.1</b> Dates</a></li>
<li class="chapter" data-level="3.21.2" data-path="basics.html"><a href="basics.html#times"><i class="fa fa-check"></i><b>3.21.2</b> Times</a></li>
<li class="chapter" data-level="3.21.3" data-path="basics.html"><a href="basics.html#lubridate-package"><i class="fa fa-check"></i><b>3.21.3</b> lubridate Package</a></li>
</ul></li>
<li class="chapter" data-level="3.22" data-path="basics.html"><a href="basics.html#complex-objects"><i class="fa fa-check"></i><b>3.22</b> Complex Objects</a></li>
<li class="chapter" data-level="3.23" data-path="basics.html"><a href="basics.html#vectors-and-matrix-products"><i class="fa fa-check"></i><b>3.23</b> Vectors and Matrix Products</a></li>
<li class="chapter" data-level="3.24" data-path="basics.html"><a href="basics.html#bibliographic-notes-1"><i class="fa fa-check"></i><b>3.24</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="3.25" data-path="basics.html"><a href="basics.html#practice-yourself"><i class="fa fa-check"></i><b>3.25</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datatable.html"><a href="datatable.html"><i class="fa fa-check"></i><b>4</b> data.table</a><ul>
<li class="chapter" data-level="4.1" data-path="datatable.html"><a href="datatable.html#make-your-own-variables"><i class="fa fa-check"></i><b>4.1</b> Make your own variables</a></li>
<li class="chapter" data-level="4.2" data-path="datatable.html"><a href="datatable.html#join"><i class="fa fa-check"></i><b>4.2</b> Join</a></li>
<li class="chapter" data-level="4.3" data-path="datatable.html"><a href="datatable.html#reshaping-data"><i class="fa fa-check"></i><b>4.3</b> Reshaping data</a><ul>
<li class="chapter" data-level="4.3.1" data-path="datatable.html"><a href="datatable.html#wide-to-long"><i class="fa fa-check"></i><b>4.3.1</b> Wide to long</a></li>
<li class="chapter" data-level="4.3.2" data-path="datatable.html"><a href="datatable.html#long-to-wide"><i class="fa fa-check"></i><b>4.3.2</b> Long to wide</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="datatable.html"><a href="datatable.html#bibliographic-notes-2"><i class="fa fa-check"></i><b>4.4</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="4.5" data-path="datatable.html"><a href="datatable.html#practice-yourself-1"><i class="fa fa-check"></i><b>4.5</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="eda.html"><a href="eda.html"><i class="fa fa-check"></i><b>5</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="5.1" data-path="eda.html"><a href="eda.html#summary-statistics"><i class="fa fa-check"></i><b>5.1</b> Summary Statistics</a><ul>
<li class="chapter" data-level="5.1.1" data-path="eda.html"><a href="eda.html#categorical-data"><i class="fa fa-check"></i><b>5.1.1</b> Categorical Data</a></li>
<li class="chapter" data-level="5.1.2" data-path="eda.html"><a href="eda.html#continous-data"><i class="fa fa-check"></i><b>5.1.2</b> Continous Data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="eda.html"><a href="eda.html#visualization"><i class="fa fa-check"></i><b>5.2</b> Visualization</a><ul>
<li class="chapter" data-level="5.2.1" data-path="eda.html"><a href="eda.html#categorical-data-1"><i class="fa fa-check"></i><b>5.2.1</b> Categorical Data</a></li>
<li class="chapter" data-level="5.2.2" data-path="eda.html"><a href="eda.html#continuous-data"><i class="fa fa-check"></i><b>5.2.2</b> Continuous Data</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="eda.html"><a href="eda.html#mixed-type-data"><i class="fa fa-check"></i><b>5.3</b> Mixed Type Data</a><ul>
<li class="chapter" data-level="5.3.1" data-path="eda.html"><a href="eda.html#alluvial"><i class="fa fa-check"></i><b>5.3.1</b> Alluvial Diagram</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="eda.html"><a href="eda.html#bibliographic-notes-3"><i class="fa fa-check"></i><b>5.4</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="5.5" data-path="eda.html"><a href="eda.html#practice-yourself-2"><i class="fa fa-check"></i><b>5.5</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lm.html"><a href="lm.html"><i class="fa fa-check"></i><b>6</b> Linear Models</a><ul>
<li class="chapter" data-level="6.1" data-path="lm.html"><a href="lm.html#problem-setup"><i class="fa fa-check"></i><b>6.1</b> Problem Setup</a></li>
<li class="chapter" data-level="6.2" data-path="lm.html"><a href="lm.html#ols-estimation-in-r"><i class="fa fa-check"></i><b>6.2</b> OLS Estimation in R</a></li>
<li class="chapter" data-level="6.3" data-path="lm.html"><a href="lm.html#inference"><i class="fa fa-check"></i><b>6.3</b> Inference</a><ul>
<li class="chapter" data-level="6.3.1" data-path="lm.html"><a href="lm.html#testing-a-hypothesis-on-a-single-coefficient"><i class="fa fa-check"></i><b>6.3.1</b> Testing a Hypothesis on a Single Coefficient</a></li>
<li class="chapter" data-level="6.3.2" data-path="lm.html"><a href="lm.html#constructing-a-confidence-interval-on-a-single-coefficient"><i class="fa fa-check"></i><b>6.3.2</b> Constructing a Confidence Interval on a Single Coefficient</a></li>
<li class="chapter" data-level="6.3.3" data-path="lm.html"><a href="lm.html#multiple-regression"><i class="fa fa-check"></i><b>6.3.3</b> Multiple Regression</a></li>
<li class="chapter" data-level="6.3.4" data-path="lm.html"><a href="lm.html#anova"><i class="fa fa-check"></i><b>6.3.4</b> ANOVA (*)</a></li>
<li class="chapter" data-level="6.3.5" data-path="lm.html"><a href="lm.html#testing-a-hypothesis-on-a-single-contrast"><i class="fa fa-check"></i><b>6.3.5</b> Testing a Hypothesis on a Single Contrast (*)</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="lm.html"><a href="lm.html#extra-diagnostics"><i class="fa fa-check"></i><b>6.4</b> Extra Diagnostics</a><ul>
<li class="chapter" data-level="6.4.1" data-path="lm.html"><a href="lm.html#diagnosing-heteroskedasticity"><i class="fa fa-check"></i><b>6.4.1</b> Diagnosing Heteroskedasticity</a></li>
<li class="chapter" data-level="6.4.2" data-path="lm.html"><a href="lm.html#diagnosing-multicolinearity"><i class="fa fa-check"></i><b>6.4.2</b> Diagnosing Multicolinearity</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="lm.html"><a href="lm.html#bibliographic-notes-4"><i class="fa fa-check"></i><b>6.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="6.6" data-path="lm.html"><a href="lm.html#practice-yourself-3"><i class="fa fa-check"></i><b>6.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="glm.html"><a href="glm.html"><i class="fa fa-check"></i><b>7</b> Generalized Linear Models</a><ul>
<li class="chapter" data-level="7.1" data-path="glm.html"><a href="glm.html#problem-setup-1"><i class="fa fa-check"></i><b>7.1</b> Problem Setup</a></li>
<li class="chapter" data-level="7.2" data-path="glm.html"><a href="glm.html#logistic-regression"><i class="fa fa-check"></i><b>7.2</b> Logistic Regression</a><ul>
<li class="chapter" data-level="7.2.1" data-path="glm.html"><a href="glm.html#logistic-regression-with-r"><i class="fa fa-check"></i><b>7.2.1</b> Logistic Regression with R</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="glm.html"><a href="glm.html#poisson-regression"><i class="fa fa-check"></i><b>7.3</b> Poisson Regression</a></li>
<li class="chapter" data-level="7.4" data-path="glm.html"><a href="glm.html#extensions"><i class="fa fa-check"></i><b>7.4</b> Extensions</a></li>
<li class="chapter" data-level="7.5" data-path="glm.html"><a href="glm.html#bibliographic-notes-5"><i class="fa fa-check"></i><b>7.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="7.6" data-path="glm.html"><a href="glm.html#practice-glm"><i class="fa fa-check"></i><b>7.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lme.html"><a href="lme.html"><i class="fa fa-check"></i><b>8</b> Linear Mixed Models</a><ul>
<li class="chapter" data-level="8.1" data-path="lme.html"><a href="lme.html#problem-setup-2"><i class="fa fa-check"></i><b>8.1</b> Problem Setup</a><ul>
<li class="chapter" data-level="8.1.1" data-path="lme.html"><a href="lme.html#non-linear-mixed-models"><i class="fa fa-check"></i><b>8.1.1</b> Non-Linear Mixed Models</a></li>
<li class="chapter" data-level="8.1.2" data-path="lme.html"><a href="lme.html#generalized-linear-mixed-models-glmm"><i class="fa fa-check"></i><b>8.1.2</b> Generalized Linear Mixed Models (GLMM)</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="lme.html"><a href="lme.html#mixed-models-with-r"><i class="fa fa-check"></i><b>8.2</b> Mixed Models with R</a><ul>
<li class="chapter" data-level="8.2.1" data-path="lme.html"><a href="lme.html#a-single-random-effect"><i class="fa fa-check"></i><b>8.2.1</b> A Single Random Effect</a></li>
<li class="chapter" data-level="8.2.2" data-path="lme.html"><a href="lme.html#multiple-random-effects"><i class="fa fa-check"></i><b>8.2.2</b> Multiple Random Effects</a></li>
<li class="chapter" data-level="8.2.3" data-path="lme.html"><a href="lme.html#a-full-mixed-model"><i class="fa fa-check"></i><b>8.2.3</b> A Full Mixed-Model</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="lme.html"><a href="lme.html#serial"><i class="fa fa-check"></i><b>8.3</b> Serial Correlations</a></li>
<li class="chapter" data-level="8.4" data-path="lme.html"><a href="lme.html#extensions-1"><i class="fa fa-check"></i><b>8.4</b> Extensions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="lme.html"><a href="lme.html#cr-se"><i class="fa fa-check"></i><b>8.4.1</b> Cluster Robust Standard Errors</a></li>
<li class="chapter" data-level="8.4.2" data-path="lme.html"><a href="lme.html#linear-models-for-panel-data"><i class="fa fa-check"></i><b>8.4.2</b> Linear Models for Panel Data</a></li>
<li class="chapter" data-level="8.4.3" data-path="lme.html"><a href="lme.html#testing-hypotheses-on-correlations"><i class="fa fa-check"></i><b>8.4.3</b> Testing Hypotheses on Correlations</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lme.html"><a href="lme.html#relation-to-other-estimators"><i class="fa fa-check"></i><b>8.5</b> Relation to Other Estimators</a><ul>
<li class="chapter" data-level="8.5.1" data-path="lme.html"><a href="lme.html#fixed-effects-in-the-econometric-literature"><i class="fa fa-check"></i><b>8.5.1</b> Fixed Effects in the Econometric Literature</a></li>
<li class="chapter" data-level="8.5.2" data-path="lme.html"><a href="lme.html#relation-to-generalized-least-squares-gls"><i class="fa fa-check"></i><b>8.5.2</b> Relation to Generalized Least Squares (GLS)</a></li>
<li class="chapter" data-level="8.5.3" data-path="lme.html"><a href="lme.html#relation-to-conditional-gaussian-fields"><i class="fa fa-check"></i><b>8.5.3</b> Relation to Conditional Gaussian Fields</a></li>
<li class="chapter" data-level="8.5.4" data-path="lme.html"><a href="lme.html#relation-to-empirical-risk-minimization-erm"><i class="fa fa-check"></i><b>8.5.4</b> Relation to Empirical Risk Minimization (ERM)</a></li>
<li class="chapter" data-level="8.5.5" data-path="lme.html"><a href="lme.html#relation-to-m-estimation"><i class="fa fa-check"></i><b>8.5.5</b> Relation to M-Estimation</a></li>
<li class="chapter" data-level="8.5.6" data-path="lme.html"><a href="lme.html#relation-to-generalize-estimating-equations-gee"><i class="fa fa-check"></i><b>8.5.6</b> Relation to Generalize Estimating Equations (GEE)</a></li>
<li class="chapter" data-level="8.5.7" data-path="lme.html"><a href="lme.html#manova"><i class="fa fa-check"></i><b>8.5.7</b> Relation to MANOVA</a></li>
<li class="chapter" data-level="8.5.8" data-path="lme.html"><a href="lme.html#relation-to-seemingly-unrelated-equations-sur"><i class="fa fa-check"></i><b>8.5.8</b> Relation to Seemingly Unrelated Equations (SUR)</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lme.html"><a href="lme.html#bibliographic-notes-6"><i class="fa fa-check"></i><b>8.6</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="8.7" data-path="lme.html"><a href="lme.html#practice-yourself-4"><i class="fa fa-check"></i><b>8.7</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="multivariate.html"><a href="multivariate.html"><i class="fa fa-check"></i><b>9</b> Multivariate Data Analysis</a><ul>
<li class="chapter" data-level="9.1" data-path="multivariate.html"><a href="multivariate.html#signal-detection"><i class="fa fa-check"></i><b>9.1</b> Signal Detection</a><ul>
<li class="chapter" data-level="9.1.1" data-path="multivariate.html"><a href="multivariate.html#hotellings-t2-test"><i class="fa fa-check"></i><b>9.1.1</b> Hotelling’s T2 Test</a></li>
<li class="chapter" data-level="9.1.2" data-path="multivariate.html"><a href="multivariate.html#various-types-of-signal-to-detect"><i class="fa fa-check"></i><b>9.1.2</b> Various Types of Signal to Detect</a></li>
<li class="chapter" data-level="9.1.3" data-path="multivariate.html"><a href="multivariate.html#simes-test"><i class="fa fa-check"></i><b>9.1.3</b> Simes’ Test</a></li>
<li class="chapter" data-level="9.1.4" data-path="multivariate.html"><a href="multivariate.html#signal-detection-with-r"><i class="fa fa-check"></i><b>9.1.4</b> Signal Detection with R</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="multivariate.html"><a href="multivariate.html#signal-counting"><i class="fa fa-check"></i><b>9.2</b> Signal Counting</a></li>
<li class="chapter" data-level="9.3" data-path="multivariate.html"><a href="multivariate.html#identification"><i class="fa fa-check"></i><b>9.3</b> Signal Identification</a><ul>
<li class="chapter" data-level="9.3.1" data-path="multivariate.html"><a href="multivariate.html#signal-identification-in-r"><i class="fa fa-check"></i><b>9.3.1</b> Signal Identification in R</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="multivariate.html"><a href="multivariate.html#signal-estimation"><i class="fa fa-check"></i><b>9.4</b> Signal Estimation (*)</a></li>
<li class="chapter" data-level="9.5" data-path="multivariate.html"><a href="multivariate.html#bibliographic-notes-7"><i class="fa fa-check"></i><b>9.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="9.6" data-path="multivariate.html"><a href="multivariate.html#practice-yourself-5"><i class="fa fa-check"></i><b>9.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="supervised.html"><a href="supervised.html"><i class="fa fa-check"></i><b>10</b> Supervised Learning</a><ul>
<li class="chapter" data-level="10.1" data-path="supervised.html"><a href="supervised.html#problem-setup-3"><i class="fa fa-check"></i><b>10.1</b> Problem Setup</a><ul>
<li class="chapter" data-level="10.1.1" data-path="supervised.html"><a href="supervised.html#common-hypothesis-classes"><i class="fa fa-check"></i><b>10.1.1</b> Common Hypothesis Classes</a></li>
<li class="chapter" data-level="10.1.2" data-path="supervised.html"><a href="supervised.html#common-complexity-penalties"><i class="fa fa-check"></i><b>10.1.2</b> Common Complexity Penalties</a></li>
<li class="chapter" data-level="10.1.3" data-path="supervised.html"><a href="supervised.html#unbiased-risk-estimation"><i class="fa fa-check"></i><b>10.1.3</b> Unbiased Risk Estimation</a></li>
<li class="chapter" data-level="10.1.4" data-path="supervised.html"><a href="supervised.html#collecting-the-pieces"><i class="fa fa-check"></i><b>10.1.4</b> Collecting the Pieces</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="supervised.html"><a href="supervised.html#supervised-learning-in-r"><i class="fa fa-check"></i><b>10.2</b> Supervised Learning in R</a><ul>
<li class="chapter" data-level="10.2.1" data-path="supervised.html"><a href="supervised.html#least-squares"><i class="fa fa-check"></i><b>10.2.1</b> Linear Models with Least Squares Loss</a></li>
<li class="chapter" data-level="10.2.2" data-path="supervised.html"><a href="supervised.html#svm"><i class="fa fa-check"></i><b>10.2.2</b> SVM</a></li>
<li class="chapter" data-level="10.2.3" data-path="supervised.html"><a href="supervised.html#neural-nets"><i class="fa fa-check"></i><b>10.2.3</b> Neural Nets</a></li>
<li class="chapter" data-level="10.2.4" data-path="supervised.html"><a href="supervised.html#trees"><i class="fa fa-check"></i><b>10.2.4</b> Classification and Regression Trees (CART)</a></li>
<li class="chapter" data-level="10.2.5" data-path="supervised.html"><a href="supervised.html#k-nearest-neighbour-knn"><i class="fa fa-check"></i><b>10.2.5</b> K-nearest neighbour (KNN)</a></li>
<li class="chapter" data-level="10.2.6" data-path="supervised.html"><a href="supervised.html#linear-discriminant-analysis-lda"><i class="fa fa-check"></i><b>10.2.6</b> Linear Discriminant Analysis (LDA)</a></li>
<li class="chapter" data-level="10.2.7" data-path="supervised.html"><a href="supervised.html#naive-bayes"><i class="fa fa-check"></i><b>10.2.7</b> Naive Bayes</a></li>
<li class="chapter" data-level="10.2.8" data-path="supervised.html"><a href="supervised.html#random-forrest"><i class="fa fa-check"></i><b>10.2.8</b> Random Forrest</a></li>
<li class="chapter" data-level="10.2.9" data-path="supervised.html"><a href="supervised.html#boosting"><i class="fa fa-check"></i><b>10.2.9</b> Boosting</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="supervised.html"><a href="supervised.html#bibliographic-notes-8"><i class="fa fa-check"></i><b>10.3</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="10.4" data-path="supervised.html"><a href="supervised.html#practice-yourself-6"><i class="fa fa-check"></i><b>10.4</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="unsupervised.html"><a href="unsupervised.html"><i class="fa fa-check"></i><b>11</b> Unsupervised Learning</a><ul>
<li class="chapter" data-level="11.1" data-path="unsupervised.html"><a href="unsupervised.html#dim-reduce"><i class="fa fa-check"></i><b>11.1</b> Dimensionality Reduction</a><ul>
<li class="chapter" data-level="11.1.1" data-path="unsupervised.html"><a href="unsupervised.html#pca"><i class="fa fa-check"></i><b>11.1.1</b> Principal Component Analysis</a></li>
<li class="chapter" data-level="11.1.2" data-path="unsupervised.html"><a href="unsupervised.html#dimensionality-reduction-preliminaries"><i class="fa fa-check"></i><b>11.1.2</b> Dimensionality Reduction Preliminaries</a></li>
<li class="chapter" data-level="11.1.3" data-path="unsupervised.html"><a href="unsupervised.html#latent-variable-generative-approaches"><i class="fa fa-check"></i><b>11.1.3</b> Latent Variable Generative Approaches</a></li>
<li class="chapter" data-level="11.1.4" data-path="unsupervised.html"><a href="unsupervised.html#purely-algorithmic-approaches"><i class="fa fa-check"></i><b>11.1.4</b> Purely Algorithmic Approaches</a></li>
<li class="chapter" data-level="11.1.5" data-path="unsupervised.html"><a href="unsupervised.html#dimensionality-reduction-in-r"><i class="fa fa-check"></i><b>11.1.5</b> Dimensionality Reduction in R</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="unsupervised.html"><a href="unsupervised.html#cluster"><i class="fa fa-check"></i><b>11.2</b> Clustering</a><ul>
<li class="chapter" data-level="11.2.1" data-path="unsupervised.html"><a href="unsupervised.html#latent-variable-generative-approaches-1"><i class="fa fa-check"></i><b>11.2.1</b> Latent Variable Generative Approaches</a></li>
<li class="chapter" data-level="11.2.2" data-path="unsupervised.html"><a href="unsupervised.html#purely-algorithmic-approaches-1"><i class="fa fa-check"></i><b>11.2.2</b> Purely Algorithmic Approaches</a></li>
<li class="chapter" data-level="11.2.3" data-path="unsupervised.html"><a href="unsupervised.html#clustering-in-r"><i class="fa fa-check"></i><b>11.2.3</b> Clustering in R</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="unsupervised.html"><a href="unsupervised.html#bibliographic-notes-9"><i class="fa fa-check"></i><b>11.3</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="11.4" data-path="unsupervised.html"><a href="unsupervised.html#practice-yourself-7"><i class="fa fa-check"></i><b>11.4</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>12</b> Plotting</a><ul>
<li class="chapter" data-level="12.1" data-path="plotting.html"><a href="plotting.html#the-graphics-system"><i class="fa fa-check"></i><b>12.1</b> The graphics System</a><ul>
<li class="chapter" data-level="12.1.1" data-path="plotting.html"><a href="plotting.html#using-existing-plotting-functions"><i class="fa fa-check"></i><b>12.1.1</b> Using Existing Plotting Functions</a></li>
<li class="chapter" data-level="12.1.2" data-path="plotting.html"><a href="plotting.html#exporting-a-plot"><i class="fa fa-check"></i><b>12.1.2</b> Exporting a Plot</a></li>
<li class="chapter" data-level="12.1.3" data-path="plotting.html"><a href="plotting.html#fancy"><i class="fa fa-check"></i><b>12.1.3</b> Fancy graphics Examples</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="plotting.html"><a href="plotting.html#the-ggplot2-system"><i class="fa fa-check"></i><b>12.2</b> The ggplot2 System</a><ul>
<li class="chapter" data-level="12.2.1" data-path="plotting.html"><a href="plotting.html#extensions-of-the-ggplot2-system"><i class="fa fa-check"></i><b>12.2.1</b> Extensions of the ggplot2 System</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="plotting.html"><a href="plotting.html#interactive-graphics"><i class="fa fa-check"></i><b>12.3</b> Interactive Graphics</a><ul>
<li class="chapter" data-level="12.3.1" data-path="plotting.html"><a href="plotting.html#plotly"><i class="fa fa-check"></i><b>12.3.1</b> Plotly</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="plotting.html"><a href="plotting.html#other-r-interfaces-to-javascript-plotting"><i class="fa fa-check"></i><b>12.4</b> Other R Interfaces to JavaScript Plotting</a></li>
<li class="chapter" data-level="12.5" data-path="plotting.html"><a href="plotting.html#bibliographic-notes-10"><i class="fa fa-check"></i><b>12.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="12.6" data-path="plotting.html"><a href="plotting.html#practice-yourself-8"><i class="fa fa-check"></i><b>12.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="report.html"><a href="report.html"><i class="fa fa-check"></i><b>13</b> Reports</a><ul>
<li class="chapter" data-level="13.1" data-path="report.html"><a href="report.html#knitr"><i class="fa fa-check"></i><b>13.1</b> knitr</a><ul>
<li class="chapter" data-level="13.1.1" data-path="report.html"><a href="report.html#installation"><i class="fa fa-check"></i><b>13.1.1</b> Installation</a></li>
<li class="chapter" data-level="13.1.2" data-path="report.html"><a href="report.html#pandoc-markdown"><i class="fa fa-check"></i><b>13.1.2</b> Pandoc Markdown</a></li>
<li class="chapter" data-level="13.1.3" data-path="report.html"><a href="report.html#rmarkdown"><i class="fa fa-check"></i><b>13.1.3</b> Rmarkdown</a></li>
<li class="chapter" data-level="13.1.4" data-path="report.html"><a href="report.html#bibtex"><i class="fa fa-check"></i><b>13.1.4</b> BibTex</a></li>
<li class="chapter" data-level="13.1.5" data-path="report.html"><a href="report.html#compiling"><i class="fa fa-check"></i><b>13.1.5</b> Compiling</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="report.html"><a href="report.html#bookdown"><i class="fa fa-check"></i><b>13.2</b> bookdown</a></li>
<li class="chapter" data-level="13.3" data-path="report.html"><a href="report.html#shiny"><i class="fa fa-check"></i><b>13.3</b> Shiny</a><ul>
<li class="chapter" data-level="13.3.1" data-path="report.html"><a href="report.html#installation-1"><i class="fa fa-check"></i><b>13.3.1</b> Installation</a></li>
<li class="chapter" data-level="13.3.2" data-path="report.html"><a href="report.html#the-basics-of-shiny"><i class="fa fa-check"></i><b>13.3.2</b> The Basics of Shiny</a></li>
<li class="chapter" data-level="13.3.3" data-path="report.html"><a href="report.html#beyond-the-basics"><i class="fa fa-check"></i><b>13.3.3</b> Beyond the Basics</a></li>
<li class="chapter" data-level="13.3.4" data-path="report.html"><a href="report.html#shinydashboard"><i class="fa fa-check"></i><b>13.3.4</b> shinydashboard</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="report.html"><a href="report.html#flexdashboard"><i class="fa fa-check"></i><b>13.4</b> flexdashboard</a></li>
<li class="chapter" data-level="13.5" data-path="report.html"><a href="report.html#bibliographic-notes-11"><i class="fa fa-check"></i><b>13.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="13.6" data-path="report.html"><a href="report.html#practice-yourself-9"><i class="fa fa-check"></i><b>13.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sparse.html"><a href="sparse.html"><i class="fa fa-check"></i><b>14</b> Sparse Representations</a><ul>
<li class="chapter" data-level="14.1" data-path="sparse.html"><a href="sparse.html#sparse-matrix-representations"><i class="fa fa-check"></i><b>14.1</b> Sparse Matrix Representations</a><ul>
<li class="chapter" data-level="14.1.1" data-path="sparse.html"><a href="sparse.html#coo"><i class="fa fa-check"></i><b>14.1.1</b> Coordinate List Representation</a></li>
<li class="chapter" data-level="14.1.2" data-path="sparse.html"><a href="sparse.html#compressed-row-oriented-representation"><i class="fa fa-check"></i><b>14.1.2</b> Compressed Row Oriented Representation</a></li>
<li class="chapter" data-level="14.1.3" data-path="sparse.html"><a href="sparse.html#compressed-column-oriented-representation"><i class="fa fa-check"></i><b>14.1.3</b> Compressed Column Oriented Representation</a></li>
<li class="chapter" data-level="14.1.4" data-path="sparse.html"><a href="sparse.html#sparse-algorithms"><i class="fa fa-check"></i><b>14.1.4</b> Sparse Algorithms</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="sparse.html"><a href="sparse.html#sparse-matrices-and-sparse-models-in-r"><i class="fa fa-check"></i><b>14.2</b> Sparse Matrices and Sparse Models in R</a><ul>
<li class="chapter" data-level="14.2.1" data-path="sparse.html"><a href="sparse.html#the-matrix-package"><i class="fa fa-check"></i><b>14.2.1</b> The Matrix Package</a></li>
<li class="chapter" data-level="14.2.2" data-path="sparse.html"><a href="sparse.html#the-glmnet-package"><i class="fa fa-check"></i><b>14.2.2</b> The glmnet Package</a></li>
<li class="chapter" data-level="14.2.3" data-path="sparse.html"><a href="sparse.html#the-matrixmodels-package"><i class="fa fa-check"></i><b>14.2.3</b> The MatrixModels Package</a></li>
<li class="chapter" data-level="14.2.4" data-path="sparse.html"><a href="sparse.html#the-sparsem-package"><i class="fa fa-check"></i><b>14.2.4</b> The SparseM Package</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sparse.html"><a href="sparse.html#beyond-sparsity"><i class="fa fa-check"></i><b>14.3</b> Beyond Sparsity</a></li>
<li class="chapter" data-level="14.4" data-path="sparse.html"><a href="sparse.html#apache-arrow"><i class="fa fa-check"></i><b>14.4</b> Apache Arrow</a></li>
<li class="chapter" data-level="14.5" data-path="sparse.html"><a href="sparse.html#bibliographic-notes-12"><i class="fa fa-check"></i><b>14.5</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="14.6" data-path="sparse.html"><a href="sparse.html#practice-yourself-10"><i class="fa fa-check"></i><b>14.6</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="memory.html"><a href="memory.html"><i class="fa fa-check"></i><b>15</b> Memory Efficiency</a><ul>
<li class="chapter" data-level="15.1" data-path="memory.html"><a href="memory.html#efficient-computing-from-ram"><i class="fa fa-check"></i><b>15.1</b> Efficient Computing from RAM</a><ul>
<li class="chapter" data-level="15.1.1" data-path="memory.html"><a href="memory.html#summary-statistics-from-ram"><i class="fa fa-check"></i><b>15.1.1</b> Summary Statistics from RAM</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="memory.html"><a href="memory.html#computing-from-a-database"><i class="fa fa-check"></i><b>15.2</b> Computing from a Database</a></li>
<li class="chapter" data-level="15.3" data-path="memory.html"><a href="memory.html#file-structure"><i class="fa fa-check"></i><b>15.3</b> Computing From Efficient File Structrures</a><ul>
<li class="chapter" data-level="15.3.1" data-path="memory.html"><a href="memory.html#bigmemory"><i class="fa fa-check"></i><b>15.3.1</b> bigmemory</a></li>
<li class="chapter" data-level="15.3.2" data-path="memory.html"><a href="memory.html#bigstep"><i class="fa fa-check"></i><b>15.3.2</b> bigstep</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="memory.html"><a href="memory.html#ff"><i class="fa fa-check"></i><b>15.4</b> ff</a></li>
<li class="chapter" data-level="15.5" data-path="memory.html"><a href="memory.html#disk.frame"><i class="fa fa-check"></i><b>15.5</b> disk.frame</a></li>
<li class="chapter" data-level="15.6" data-path="memory.html"><a href="memory.html#matter"><i class="fa fa-check"></i><b>15.6</b> matter</a></li>
<li class="chapter" data-level="15.7" data-path="memory.html"><a href="memory.html#iotools"><i class="fa fa-check"></i><b>15.7</b> iotools</a></li>
<li class="chapter" data-level="15.8" data-path="memory.html"><a href="memory.html#hdf5"><i class="fa fa-check"></i><b>15.8</b> HDF5</a></li>
<li class="chapter" data-level="15.9" data-path="memory.html"><a href="memory.html#delayedarray"><i class="fa fa-check"></i><b>15.9</b> DelayedArray</a></li>
<li class="chapter" data-level="15.10" data-path="memory.html"><a href="memory.html#computing-from-a-distributed-file-system"><i class="fa fa-check"></i><b>15.10</b> Computing from a Distributed File System</a></li>
<li class="chapter" data-level="15.11" data-path="memory.html"><a href="memory.html#bibliographic-notes-13"><i class="fa fa-check"></i><b>15.11</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="15.12" data-path="memory.html"><a href="memory.html#practice-yourself-11"><i class="fa fa-check"></i><b>15.12</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="parallel.html"><a href="parallel.html"><i class="fa fa-check"></i><b>16</b> Parallel Computing</a><ul>
<li class="chapter" data-level="16.1" data-path="parallel.html"><a href="parallel.html#implicit-parallelism"><i class="fa fa-check"></i><b>16.1</b> Implicit Parallelism</a></li>
<li class="chapter" data-level="16.2" data-path="parallel.html"><a href="parallel.html#explicit-parallelism"><i class="fa fa-check"></i><b>16.2</b> Explicit Parallelism</a><ul>
<li class="chapter" data-level="16.2.1" data-path="parallel.html"><a href="parallel.html#caution-implicit-with-explicit-parallelism"><i class="fa fa-check"></i><b>16.2.1</b> Caution: Implicit with Explicit Parallelism</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="parallel.html"><a href="parallel.html#bibliographic-notes-14"><i class="fa fa-check"></i><b>16.3</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="16.4" data-path="parallel.html"><a href="parallel.html#practice-yourself-12"><i class="fa fa-check"></i><b>16.4</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="algebra.html"><a href="algebra.html"><i class="fa fa-check"></i><b>17</b> Numerical Linear Algebra</a><ul>
<li class="chapter" data-level="17.1" data-path="algebra.html"><a href="algebra.html#lu-factorization"><i class="fa fa-check"></i><b>17.1</b> LU Factorization</a></li>
<li class="chapter" data-level="17.2" data-path="algebra.html"><a href="algebra.html#cholesky-factorization"><i class="fa fa-check"></i><b>17.2</b> Cholesky Factorization</a></li>
<li class="chapter" data-level="17.3" data-path="algebra.html"><a href="algebra.html#qr-factorization"><i class="fa fa-check"></i><b>17.3</b> QR Factorization</a></li>
<li class="chapter" data-level="17.4" data-path="algebra.html"><a href="algebra.html#singular-value-factorization"><i class="fa fa-check"></i><b>17.4</b> Singular Value Factorization</a></li>
<li class="chapter" data-level="17.5" data-path="algebra.html"><a href="algebra.html#iterative-methods"><i class="fa fa-check"></i><b>17.5</b> Iterative Methods</a></li>
<li class="chapter" data-level="17.6" data-path="algebra.html"><a href="algebra.html#solving-ols"><i class="fa fa-check"></i><b>17.6</b> Solving the OLS Problem</a></li>
<li class="chapter" data-level="17.7" data-path="algebra.html"><a href="algebra.html#numerical-libraries-for-linear-algebra"><i class="fa fa-check"></i><b>17.7</b> Numerical Libraries for Linear Algebra</a><ul>
<li class="chapter" data-level="17.7.1" data-path="algebra.html"><a href="algebra.html#openblas"><i class="fa fa-check"></i><b>17.7.1</b> OpenBlas</a></li>
<li class="chapter" data-level="17.7.2" data-path="algebra.html"><a href="algebra.html#mkl"><i class="fa fa-check"></i><b>17.7.2</b> MKL</a></li>
</ul></li>
<li class="chapter" data-level="17.8" data-path="algebra.html"><a href="algebra.html#bibliographic-notes-15"><i class="fa fa-check"></i><b>17.8</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="17.9" data-path="algebra.html"><a href="algebra.html#practice-yourself-13"><i class="fa fa-check"></i><b>17.9</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="convex.html"><a href="convex.html"><i class="fa fa-check"></i><b>18</b> Convex Optimization</a><ul>
<li class="chapter" data-level="18.1" data-path="convex.html"><a href="convex.html#theoretical-backround"><i class="fa fa-check"></i><b>18.1</b> Theoretical Backround</a></li>
<li class="chapter" data-level="18.2" data-path="convex.html"><a href="convex.html#optimizing-with-r"><i class="fa fa-check"></i><b>18.2</b> Optimizing with R</a><ul>
<li class="chapter" data-level="18.2.1" data-path="convex.html"><a href="convex.html#the-optim-function"><i class="fa fa-check"></i><b>18.2.1</b> The optim Function</a></li>
<li class="chapter" data-level="18.2.2" data-path="convex.html"><a href="convex.html#the-nloptr-package"><i class="fa fa-check"></i><b>18.2.2</b> The nloptr Package</a></li>
<li class="chapter" data-level="18.2.3" data-path="convex.html"><a href="convex.html#minqa-package"><i class="fa fa-check"></i><b>18.2.3</b> minqa Package</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="convex.html"><a href="convex.html#bibliographic-notes-16"><i class="fa fa-check"></i><b>18.3</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="18.4" data-path="convex.html"><a href="convex.html#practice-yourself-14"><i class="fa fa-check"></i><b>18.4</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>19</b> RCpp</a><ul>
<li class="chapter" data-level="19.1" data-path="rcpp.html"><a href="rcpp.html#bibliographic-notes-17"><i class="fa fa-check"></i><b>19.1</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="19.2" data-path="rcpp.html"><a href="rcpp.html#practice-yourself-15"><i class="fa fa-check"></i><b>19.2</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>20</b> Debugging Tools</a><ul>
<li class="chapter" data-level="20.1" data-path="debugging.html"><a href="debugging.html#bibliographic-notes-18"><i class="fa fa-check"></i><b>20.1</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="20.2" data-path="debugging.html"><a href="debugging.html#practice-yourself-16"><i class="fa fa-check"></i><b>20.2</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="hadley.html"><a href="hadley.html"><i class="fa fa-check"></i><b>21</b> The Hadleyverse</a><ul>
<li class="chapter" data-level="21.1" data-path="hadley.html"><a href="hadley.html#readr"><i class="fa fa-check"></i><b>21.1</b> readr</a></li>
<li class="chapter" data-level="21.2" data-path="hadley.html"><a href="hadley.html#dplyr"><i class="fa fa-check"></i><b>21.2</b> dplyr</a></li>
<li class="chapter" data-level="21.3" data-path="hadley.html"><a href="hadley.html#tidyr"><i class="fa fa-check"></i><b>21.3</b> tidyr</a></li>
<li class="chapter" data-level="21.4" data-path="hadley.html"><a href="hadley.html#reshape2"><i class="fa fa-check"></i><b>21.4</b> reshape2</a></li>
<li class="chapter" data-level="21.5" data-path="hadley.html"><a href="hadley.html#stringr"><i class="fa fa-check"></i><b>21.5</b> stringr</a></li>
<li class="chapter" data-level="21.6" data-path="hadley.html"><a href="hadley.html#anytime"><i class="fa fa-check"></i><b>21.6</b> anytime</a></li>
<li class="chapter" data-level="21.7" data-path="hadley.html"><a href="hadley.html#biblipgraphic-notes"><i class="fa fa-check"></i><b>21.7</b> Biblipgraphic Notes</a></li>
<li class="chapter" data-level="21.8" data-path="hadley.html"><a href="hadley.html#practice-yourself-17"><i class="fa fa-check"></i><b>21.8</b> Practice Yourself</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="causality.html"><a href="causality.html"><i class="fa fa-check"></i><b>22</b> Causal Inferense</a><ul>
<li class="chapter" data-level="22.1" data-path="causality.html"><a href="causality.html#causal-inference-from-designed-experiments"><i class="fa fa-check"></i><b>22.1</b> Causal Inference From Designed Experiments</a><ul>
<li class="chapter" data-level="22.1.1" data-path="causality.html"><a href="causality.html#design-of-experiments"><i class="fa fa-check"></i><b>22.1.1</b> Design of Experiments</a></li>
<li class="chapter" data-level="22.1.2" data-path="causality.html"><a href="causality.html#randomized-inference"><i class="fa fa-check"></i><b>22.1.2</b> Randomized Inference</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="causality.html"><a href="causality.html#causal-inference-from-observational-data"><i class="fa fa-check"></i><b>22.2</b> Causal Inference from Observational Data</a><ul>
<li class="chapter" data-level="22.2.1" data-path="causality.html"><a href="causality.html#principal-stratification"><i class="fa fa-check"></i><b>22.2.1</b> Principal Stratification</a></li>
<li class="chapter" data-level="22.2.2" data-path="causality.html"><a href="causality.html#instrumental-variables"><i class="fa fa-check"></i><b>22.2.2</b> Instrumental Variables</a></li>
<li class="chapter" data-level="22.2.3" data-path="causality.html"><a href="causality.html#propensity-scores"><i class="fa fa-check"></i><b>22.2.3</b> Propensity Scores</a></li>
<li class="chapter" data-level="22.2.4" data-path="causality.html"><a href="causality.html#direct-lieklihood"><i class="fa fa-check"></i><b>22.2.4</b> Direct Lieklihood</a></li>
<li class="chapter" data-level="22.2.5" data-path="causality.html"><a href="causality.html#regression-discontinuity"><i class="fa fa-check"></i><b>22.2.5</b> Regression Discontinuity</a></li>
</ul></li>
<li class="chapter" data-level="22.3" data-path="causality.html"><a href="causality.html#bibliographic-notes-19"><i class="fa fa-check"></i><b>22.3</b> Bibliographic Notes</a></li>
<li class="chapter" data-level="22.4" data-path="causality.html"><a href="causality.html#practice-yourself-18"><i class="fa fa-check"></i><b>22.4</b> Practice Yourself</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R (BGU course)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basics" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> R Basics</h1>
<p>We now start with the basics of R. If you have any experience at all with R, you can probably skip this section.</p>
<p>First, make sure you work with the RStudio IDE. Some useful pointers for this IDE include:</p>
<ul>
<li>Ctrl+Return(Enter) to run lines from editor.</li>
<li>Alt+Shift+k for RStudio keyboard shortcuts.</li>
<li>Ctrl+r to browse the command history.</li>
<li>Alt+Shift+j to navigate between code sections</li>
<li>tab for auto-completion</li>
<li>Ctrl+1 to skip to editor.</li>
<li>Ctrl+2 to skip to console.</li>
<li>Ctrl+8 to skip to the environment list.</li>
<li>Ctrl + Alt + Shift + M to select all instances of the selection (for refactoring).</li>
<li>Code Folding:
<ul>
<li>Alt+l collapse chunk.</li>
<li>Alt+Shift+l unfold chunk.</li>
<li>Alt+o collapse all.</li>
<li>Alt+Shift+o unfold all.</li>
</ul></li>
<li>Alt+“-” for the assignment operator <code>&lt;-</code>.</li>
</ul>
<div id="other-ides" class="section level3">
<h3><span class="header-section-number">3.0.1</span> Other IDEs</h3>
<p>Currently, I recommend RStudio, but here are some other IDEs:</p>
<ol style="list-style-type: decimal">
<li><p>Jupyter Lab: a very promising IDE, originally designed for Python, that also supports R. At the time of writing, it seems that RStudio is more convenient for R, but it is definitely an IDE to follow closely. See <a href="http://minimaxir.com/2017/06/r-notebooks/">Max Woolf’s</a> review.</p></li>
<li><p>Eclipse: If you are a Java programmer, you are probably familiar with Eclipse, which does have an R plugin: <a href="http://www.walware.de/goto/statet">StatEt</a>.</p></li>
<li><p>Emacs: If you are an Emacs fan, you can find an R plugin: <a href="http://ess.r-project.org/">ESS</a>.</p></li>
<li><p>Vim: <a href="https://github.com/vim-scripts/Vim-R-plugin">Vim-R</a>.</p></li>
<li><p>Visual Studio also <a href="https://www.visualstudio.com/vs/features/rtvs/">supports R</a>. If you need R for commercial purposes, it may be worthwhile trying Microsoft’s R, instead of the usual R. See <a href="https://mran.microsoft.com/documents/rro/installation">here</a> for installation instructions.</p></li>
<li><p>Online version (currently alpha): <a href="https://rstudio.cloud">R Studio Cloud</a>.</p></li>
</ol>
</div>
<div id="file-types" class="section level2">
<h2><span class="header-section-number">3.1</span> File types</h2>
<p>The file types you need to know when using R are the following:</p>
<ul>
<li><strong>.R</strong>: An ASCII text file containing R scripts only.</li>
<li><strong>.Rmd</strong>: An ASCII text file. If opened in RStudio can be run as an R-Notebook or compiled using knitr, bookdown, etc.</li>
</ul>
</div>
<div id="simple-calculator" class="section level2">
<h2><span class="header-section-number">3.2</span> Simple calculator</h2>
<p>R can be used as a simple calculator. Create a new R Notebook (.Rmd file) within RStudio using File-&gt; New -&gt; R Notebook, and run the following commands.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">10</span><span class="op">+</span><span class="dv">5</span> </code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">70</span><span class="op">*</span><span class="dv">81</span></code></pre></div>
<pre><code>## [1] 5670</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">**</span><span class="dv">4</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">^</span><span class="dv">4</span></code></pre></div>
<pre><code>## [1] 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">10</span>)                         </code></pre></div>
<pre><code>## [1] 2.302585</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">16</span>, <span class="dv">2</span>)                      </code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(<span class="dv">1000</span>, <span class="dv">10</span>)                   </code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="probability-calculator" class="section level2">
<h2><span class="header-section-number">3.3</span> Probability calculator</h2>
<p>R can be used as a probability calculator. You probably wish you knew this when you did your Intro To Probability classes.</p>
<p>The Binomial distribution function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dbinom</span>(<span class="dt">x=</span><span class="dv">3</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>)  <span class="co"># Compute P(X=3) for X~B(n=10, p=0.5) </span></code></pre></div>
<pre><code>## [1] 0.1171875</code></pre>
<p>Notice that arguments do not need to be named explicitly</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dbinom</span>(<span class="dv">3</span>, <span class="dv">10</span>, <span class="fl">0.5</span>)</code></pre></div>
<pre><code>## [1] 0.1171875</code></pre>
<p>The Binomial cumulative distribution function (CDF):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pbinom</span>(<span class="dt">q=</span><span class="dv">3</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>) <span class="co"># Compute P(X&lt;=3) for X~B(n=10, p=0.5)   </span></code></pre></div>
<pre><code>## [1] 0.171875</code></pre>
<p>The Binomial quantile function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qbinom</span>(<span class="dt">p=</span><span class="fl">0.1718</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>) <span class="co"># For X~B(n=10, p=0.5) returns k such that P(X&lt;=k)=0.1718</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Generate random variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbinom</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>)</code></pre></div>
<pre><code>##  [1] 4 4 5 7 4 7 7 6 6 3</code></pre>
<p>R has many built-in distributions. Their names may change, but the prefixes do not:</p>
<ul>
<li><strong>d</strong> prefix for the <em>distribution</em> function.</li>
<li><strong>p</strong> prefix for the <em>cummulative distribution</em> function (CDF).</li>
<li><strong>q</strong> prefix for the <em>quantile</em> function (i.e., the inverse CDF).</li>
<li><strong>r</strong> prefix to generate random samples.</li>
</ul>
<p>Demonstrating this idea, using the CDF of several popular distributions:</p>
<ul>
<li><code>pbinom()</code> for the Binomial CDF.</li>
<li><code>ppois()</code> for the Poisson CDF.</li>
<li><code>pnorm()</code> for the Gaussian CDF.</li>
<li><code>pexp()</code> for the Exponential CDF.</li>
</ul>
<p>For more information see <code>?distributions</code>.</p>
</div>
<div id="getting-help" class="section level2">
<h2><span class="header-section-number">3.4</span> Getting Help</h2>
<p>One of the most important parts of working with a language, is to know where to find help. R has several in-line facilities, besides the various help resources in the R <a href="intro.html#ecosystem">ecosystem</a>.</p>
<p>Get help for a particular function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?dbinom 
<span class="kw">help</span>(dbinom)</code></pre></div>
<p>If you don’t know the name of the function you are looking for, search local help files for a particular string:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">??binomial
<span class="kw">help.search</span>(<span class="st">&#39;dbinom&#39;</span>) </code></pre></div>
<p>Or load a menu where you can navigate local help in a web-based fashion:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.start</span>() </code></pre></div>
</div>
<div id="variable-assignment" class="section level2">
<h2><span class="header-section-number">3.5</span> Variable Assignment</h2>
<p>Assignment of some output into an object named “x”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span><span class="kw">rbinom</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>) <span class="co"># Works. Bad style.</span>
x &lt;-<span class="st"> </span><span class="kw">rbinom</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>) </code></pre></div>
<p>If you are familiar with other programming languages you may prefer the <code>=</code> assignment rather than the <code>&lt;-</code> assignment. We recommend you make the effort to change your preferences. This is because thinking with <code>&lt;-</code> helps to read your code, distinguishes between assignments and function arguments: think of <code>function(argument=value)</code> versus <code>function(argument&lt;-value)</code>. It also helps understand special assignment operators such as <code>&lt;&lt;-</code> and <code>-&gt;</code>.</p>

<div class="remark">
 <span class="remark"><em>Remark. </em></span> <strong>Style</strong>: We do not discuss style guidelines in this text, but merely remind the reader that good style is extremely important. When you write code, think of other readers, but also think of future self. See <a href="http://adv-r.had.co.nz/Style.html">Hadley’s style guide</a> for more.
</div>

<p>To print the contents of an object just type its name</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>##  [1] 7 4 6 3 4 5 2 5 7 4</code></pre>
<p>which is an implicit call to</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(x)  </code></pre></div>
<pre><code>##  [1] 7 4 6 3 4 5 2 5 7 4</code></pre>
<p>Alternatively, you can assign and print simultaneously using parenthesis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(x &lt;-<span class="st"> </span><span class="kw">rbinom</span>(<span class="dt">n=</span><span class="dv">10</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>))  <span class="co"># Assign and print.</span></code></pre></div>
<pre><code>##  [1] 5 5 5 4 6 6 6 3 6 5</code></pre>
<p>Operate on the object</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(x)  <span class="co"># compute mean</span></code></pre></div>
<pre><code>## [1] 5.1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var</span>(x)  <span class="co"># compute variance</span></code></pre></div>
<pre><code>## [1] 0.9888889</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(x) <span class="co"># plot histogram</span></code></pre></div>
<p><img src="Rcourse_files/figure-html/unnamed-chunk-15-1.png" width="50%" /></p>
<p>R saves every object you create in RAM<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. The collection of all such objects is the <strong>workspace</strong> which you can inspect with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>()</code></pre></div>
<pre><code>## [1] &quot;x&quot;</code></pre>
<p>or with Ctrl+8 in RStudio.</p>
<p>If you lost your object, you can use <code>ls</code> with a text pattern to search for it</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ls</span>(<span class="dt">pattern=</span><span class="st">&#39;x&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;x&quot;</code></pre>
<p>To remove objects from the workspace:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(x) <span class="co"># remove variable</span>
<span class="kw">ls</span>() <span class="co"># verify</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>You may think that if an object is removed then its memory is freed. This is almost true, and depends on a negotiation mechanism between R and the operating system. R’s memory management is discussed in Chapter <a href="memory.html#memory">15</a>.</p>
</div>
<div id="missing" class="section level2">
<h2><span class="header-section-number">3.6</span> Missing</h2>
<p>Unlike typically programming, when working with real life data, you may have <strong>missing</strong> values: measurements that were simply not recorded/stored/etc. <em>R</em> has rather sophisticated mechanisms to deal with missing values. It distinguishes between the following types:</p>
<ol style="list-style-type: decimal">
<li><code>NA</code>: Not Available entries.</li>
<li><code>NaN</code>: Not a number.</li>
</ol>
<p><em>R</em> tries to defend the analyst, and return an error, or <code>NA</code> when the presence of missing values invalidates the calculation:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">missing.example &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="ot">NA</span>)
<span class="kw">mean</span>(missing.example)</code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Most functions will typically have an inner mechanism to deal with these. In the <code>mean</code> function, there is an <code>na.rm</code> argument, telling <em>R</em> how to Remove <code>NA</code>s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(missing.example, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] 11</code></pre>
<p>A more general mechanism is removing these manually:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">clean.example &lt;-<span class="st"> </span><span class="kw">na.omit</span>(missing.example)
<span class="kw">mean</span>(clean.example)</code></pre></div>
<pre><code>## [1] 11</code></pre>
</div>
<div id="piping" class="section level2">
<h2><span class="header-section-number">3.7</span> Piping</h2>
<p>Because R originates in Unix and Linux environments, it inherits much of its flavor. <a href="http://ryanstutorials.net/linuxtutorial/piping.php">Piping</a> is an idea taken from the Linux shell which allows to use the output of one expression as the input to another. Piping thus makes code easier to read and write.</p>

<div class="remark">
 <span class="remark"><em>Remark. </em></span> Volleyball fans may be confused with the idea of spiking a ball from the 3-meter line, also called <a href="https://www.youtube.com/watch?v=DEaj4X_JhSY">piping</a>. So: (a) These are very different things. (b) If you can pipe, <a href="http://in.bgu.ac.il/sport/Pages/asa.aspx">ASA-BGU</a> is looking for you!
</div>

<p>Prerequisites:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(magrittr) <span class="co"># load the piping functions</span>
x &lt;-<span class="st"> </span><span class="kw">rbinom</span>(<span class="dt">n=</span><span class="dv">1000</span>, <span class="dt">size=</span><span class="dv">10</span>, <span class="dt">prob=</span><span class="fl">0.5</span>) <span class="co"># generate some toy data</span></code></pre></div>
<p>Examples</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">var</span>() <span class="co"># Instead of var(x)</span>
x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">hist</span>()  <span class="co"># Instead of hist(x)</span>
x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mean</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">add</span>(<span class="dv">10</span>) </code></pre></div>
<p>The next example<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> demonstrates the benefits of piping. The next two chunks of code do the same thing. Try parsing them in your mind:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Functional (onion) style</span>
car_data &lt;-<span class="st"> </span>
<span class="st">  </span><span class="kw">transform</span>(<span class="kw">aggregate</span>(. <span class="op">~</span><span class="st"> </span>cyl, 
                      <span class="dt">data =</span> <span class="kw">subset</span>(mtcars, hp <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>), 
                      <span class="dt">FUN =</span> <span class="cf">function</span>(x) <span class="kw">round</span>(<span class="kw">mean</span>(x, <span class="dv">2</span>))), 
            <span class="dt">kpl =</span> mpg<span class="op">*</span><span class="fl">0.4251</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Piping (magrittr) style</span>
car_data &lt;-<span class="st"> </span>
<span class="st">  </span>mtcars <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">subset</span>(hp <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">aggregate</span>(. <span class="op">~</span><span class="st"> </span>cyl, <span class="dt">data =</span> ., <span class="dt">FUN =</span> . <span class="op">%&gt;%</span><span class="st"> </span>mean <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">round</span>(<span class="dv">2</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">transform</span>(<span class="dt">kpl =</span> mpg <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">multiply_by</span>(<span class="fl">0.4251</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>print</code></pre></div>
<p>Tip: RStudio has a keyboard shortcut for the <code>%&gt;%</code> operator. Try Ctrl+Shift+m.</p>
</div>
<div id="vector-creation-and-manipulation" class="section level2">
<h2><span class="header-section-number">3.8</span> Vector Creation and Manipulation</h2>
<p>The most basic building block in R is the <strong>vector</strong>. We will now see how to create them, and access their elements (i.e. subsetting). Here are three ways to create the same arbitrary vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>) <span class="co"># manually</span>
<span class="dv">10</span><span class="op">:</span><span class="dv">21</span> <span class="co"># the `:` operator                            </span>
<span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">10</span>, <span class="dt">to=</span><span class="dv">21</span>, <span class="dt">by=</span><span class="dv">1</span>) <span class="co"># the seq() function</span></code></pre></div>
<p>Let’s assign it to the object named “x”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span>, <span class="dv">21</span>)  </code></pre></div>
<p>Operations usually work element-wise:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">+</span><span class="dv">2</span></code></pre></div>
<pre><code>##  [1] 12 13 14 15 16 17 18 19 20 21 22 23</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">*</span><span class="dv">2</span>    </code></pre></div>
<pre><code>##  [1] 20 22 24 26 28 30 32 34 36 38 40 42</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x<span class="op">^</span><span class="dv">2</span>    </code></pre></div>
<pre><code>##  [1] 100 121 144 169 196 225 256 289 324 361 400 441</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sqrt</span>(x)  </code></pre></div>
<pre><code>##  [1] 3.162278 3.316625 3.464102 3.605551 3.741657 3.872983 4.000000
##  [8] 4.123106 4.242641 4.358899 4.472136 4.582576</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">log</span>(x)   </code></pre></div>
<pre><code>##  [1] 2.302585 2.397895 2.484907 2.564949 2.639057 2.708050 2.772589
##  [8] 2.833213 2.890372 2.944439 2.995732 3.044522</code></pre>
</div>
<div id="search-paths-and-packages" class="section level2">
<h2><span class="header-section-number">3.9</span> Search Paths and Packages</h2>
<p>R can be easily extended with packages, which are merely a set of documented functions, which can be loaded or unloaded conveniently. Let’s look at the function <code>read.csv</code>. We can see its contents by calling it without arguments:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">read.csv</code></pre></div>
<pre><code>## function (file, header = TRUE, sep = &quot;,&quot;, quote = &quot;\&quot;&quot;, dec = &quot;.&quot;, 
##     fill = TRUE, comment.char = &quot;&quot;, ...) 
## read.table(file = file, header = header, sep = sep, quote = quote, 
##     dec = dec, fill = fill, comment.char = comment.char, ...)
## &lt;bytecode: 0x3e49070&gt;
## &lt;environment: namespace:utils&gt;</code></pre>
<p>Never mind what the function does. Note the <code>environment: namespace:utils</code> line at the end. It tells us that this function is part of the <strong>utils</strong> package. We did not need to know this because it is loaded by default. Here are some packages that I have currently loaded:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">search</span>()</code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;           &quot;package:nycflights13&quot; &quot;package:doSNOW&quot;      
##  [4] &quot;package:snow&quot;         &quot;package:doParallel&quot;   &quot;package:parallel&quot;    
##  [7] &quot;package:iterators&quot;    &quot;package:biganalytics&quot; &quot;package:bigmemory&quot;   
## [10] &quot;package:dplyr&quot;        &quot;package:biglm&quot;        &quot;package:DBI&quot;         
## [13] &quot;package:MatrixModels&quot; &quot;package:plotly&quot;       &quot;package:kernlab&quot;     
## [16] &quot;package:scales&quot;       &quot;package:plyr&quot;         &quot;package:class&quot;       
## [19] &quot;package:rpart&quot;        &quot;package:nnet&quot;         &quot;package:e1071&quot;       
## [22] &quot;package:glmnet&quot;       &quot;package:foreach&quot;      &quot;package:ellipse&quot;     
## [25] &quot;package:nlme&quot;         &quot;package:lattice&quot;      &quot;package:lme4&quot;        
## [28] &quot;package:Matrix&quot;       &quot;package:multcomp&quot;     &quot;package:TH.data&quot;     
## [31] &quot;package:survival&quot;     &quot;package:mvtnorm&quot;      &quot;package:MASS&quot;        
## [34] &quot;package:ggalluvial&quot;   &quot;package:ggplot2&quot;      &quot;package:hexbin&quot;      
## [37] &quot;package:data.table&quot;   &quot;package:magrittr&quot;     &quot;tools:rstudio&quot;       
## [40] &quot;package:stats&quot;        &quot;package:graphics&quot;     &quot;package:grDevices&quot;   
## [43] &quot;package:utils&quot;        &quot;package:datasets&quot;     &quot;package:methods&quot;     
## [46] &quot;Autoloads&quot;            &quot;package:base&quot;</code></pre>
<p>Other packages can be loaded via the <code>library</code> function, or downloaded from the internet using the <code>install.packages</code> function before loading with <code>library</code>. Note that you can easily speedup package download by using multiple CPUs. Just call <code>options(Ncpus = XXX)</code>, where <code>XXX</code> is the number of CPUs you want to use. Run <code>parallel::detectCores()</code> if you are unsure how many CPUs you have on your machine.</p>
</div>
<div id="simple-plotting" class="section level2">
<h2><span class="header-section-number">3.10</span> Simple Plotting</h2>
<p>R has many plotting facilities as we will further detail in the Plotting Chapter <a href="plotting.html#plotting">12</a>. We start with the simplest facilities, namely, the <code>plot</code> function from the <strong>graphics</strong> package, which is loaded by default.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">100</span>
y&lt;-<span class="st"> </span><span class="dv">3</span><span class="op">+</span><span class="kw">sin</span>(x) 
<span class="kw">plot</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y) <span class="co"># x,y syntax                         </span></code></pre></div>
<p><img src="Rcourse_files/figure-html/basic-scatter-plot-1.png" width="50%" /></p>
<p>Given an <code>x</code> argument and a <code>y</code> argument, <code>plot</code> tries to present a scatter plot. We call this the <code>x,y</code> syntax. R has another unique syntax to state functional relations. We call <code>y~x</code> the “tilde” syntax, which originates in works of <span class="citation">G. Wilkinson and Rogers (<a href="#ref-wilkinson1973symbolic">1973</a>)</span> and was adopted in the early days of S.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">type=</span><span class="st">&#39;l&#39;</span>) <span class="co"># y~x syntax </span></code></pre></div>
<p><img src="Rcourse_files/figure-html/unnamed-chunk-32-1.png" width="50%" /></p>
<p>The syntax <code>y~x</code> is read as “y is a function of x”. We will prefer the <code>y~x</code> syntax over the <code>x,y</code> syntax since it is easier to read, and will be very useful when we discuss more complicated models.</p>
<p>Here are some arguments that control the plot’s appearance. We use <code>type</code> to control the plot type, <code>main</code> to control the main title.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(y<span class="op">~</span>x, <span class="dt">type=</span><span class="st">&#39;l&#39;</span>, <span class="dt">main=</span><span class="st">&#39;Plotting a connected line&#39;</span>) </code></pre></div>
<p><img src="Rcourse_files/figure-html/unnamed-chunk-33-1.png" width="50%" /></p>
<p>We use <code>xlab</code> for the x-axis label, <code>ylab</code> for the y-axis.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(y<span class="op">~</span>x, <span class="dt">type=</span><span class="st">&#39;h&#39;</span>, <span class="dt">main=</span><span class="st">&#39;Sticks plot&#39;</span>, <span class="dt">xlab=</span><span class="st">&#39;Insert x axis label&#39;</span>, <span class="dt">ylab=</span><span class="st">&#39;Insert y axis label&#39;</span>) </code></pre></div>
<p><img src="Rcourse_files/figure-html/axis-labels-1.png" width="50%" /></p>
<p>We use <code>pch</code> to control the point type (pch is acronym for Plotting CHaracter).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(y<span class="op">~</span>x, <span class="dt">pch=</span><span class="dv">5</span>) <span class="co"># Point type with pcf</span></code></pre></div>
<p><img src="Rcourse_files/figure-html/unnamed-chunk-34-1.png" width="50%" /></p>
<p>We use <code>col</code> to control the color, <code>cex</code> (Character EXpansion) for the point size, and <code>abline</code> (y=Bx+A) to add a straight line.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(y<span class="op">~</span>x, <span class="dt">pch=</span><span class="dv">10</span>, <span class="dt">type=</span><span class="st">&#39;p&#39;</span>, <span class="dt">col=</span><span class="st">&#39;blue&#39;</span>, <span class="dt">cex=</span><span class="dv">4</span>) 
<span class="kw">abline</span>(<span class="dv">3</span>, <span class="fl">0.002</span>) </code></pre></div>
<p><img src="Rcourse_files/figure-html/unnamed-chunk-35-1.png" width="50%" /></p>
<p>For more plotting options run these</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(plot)
<span class="kw">example</span>(points)
?plot
<span class="kw">help</span>(<span class="dt">package=</span><span class="st">&#39;graphics&#39;</span>)</code></pre></div>
<p>When your plotting gets serious, go to Chapter <a href="plotting.html#plotting">12</a>.</p>
</div>
<div id="object-types" class="section level2">
<h2><span class="header-section-number">3.11</span> Object Types</h2>
<p>We already saw that the basic building block of R objects is the vector. Vectors can be of the following types:</p>
<ul>
<li><strong>character</strong> Where each element is a string, i.e., a sequence of alphanumeric symbols.</li>
<li><strong>numeric</strong> Where each element is a <a href="https://en.wikipedia.org/wiki/Real_number">real number</a> in <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">double precision</a> floating point format.</li>
<li><strong>integer</strong> Where each element is an <a href="https://en.wikipedia.org/wiki/Integer">integer</a>.</li>
<li><strong>logical</strong> Where each element is either TRUE, FALSE, or NA<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></li>
<li><strong>complex</strong> Where each element is a complex number.</li>
<li><strong>list</strong> Where each element is an arbitrary R object.</li>
<li><strong>factor</strong> Factors are not actually vector objects, but they feel like such. They are used to encode any finite set of values. This will be very useful when fitting linear model because they include information on contrasts, i.e., on the encoding of the factors levels. You should always be alert and recall when you are dealing with a factor or with a character vector. They have different behaviors.</li>
</ul>
<p>Vectors can be combined into larger objects. A <code>matrix</code> can be thought of as the binding of several vectors of the same type. In reality, a matrix is merely a vector with a dimension attribute, that tells R to read it as a matrix and not a vector.</p>
<p>If vectors of different types (but same length) are binded, we get a <code>data.frame</code> which is the most fundamental object in R for data analysis. Data frames are brilliant, but a lot has been learned since their invention. They have thus been extended in recent years with the <code>tbl</code> class, pronounced [Tibble] (<a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html" class="uri">https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html</a>), and the <code>data.table</code> class.<br />
The latter is discussed in Chapter <a href="datatable.html#datatable">4</a>, and is strongly recommended.</p>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">3.12</span> Data Frames</h2>
<p>Creating a simple data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
y&lt;-<span class="st"> </span><span class="dv">3</span> <span class="op">+</span><span class="st"> </span><span class="kw">sin</span>(x) 
frame1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">x=</span>x, <span class="dt">sin=</span>y)    </code></pre></div>
<p>Let’s inspect our data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(frame1)</code></pre></div>
<pre><code>##   x      sin
## 1 1 3.841471
## 2 2 3.909297
## 3 3 3.141120
## 4 4 2.243198
## 5 5 2.041076
## 6 6 2.720585</code></pre>
<p>Now using the RStudio Excel-like viewer:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(frame1) </code></pre></div>
<p>We highly advise against editing the data this way since there will be no documentation of the changes you made. Always transform your data using scripts, so that everything is documented.</p>
<p>Verifying this is a data frame:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1) <span class="co"># the object is of type data.frame</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Check the dimension of the data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(frame1)                             </code></pre></div>
<pre><code>## [1] 10  2</code></pre>
<p>Note that checking the dimension of a vector is different than checking the dimension of a data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(x)</code></pre></div>
<pre><code>## [1] 10</code></pre>
<p>The length of a <code>data.frame</code> is merely the number of columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(frame1) </code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div id="exctraction" class="section level2">
<h2><span class="header-section-number">3.13</span> Exctraction</h2>
<p>R provides many ways to subset and extract elements from vectors and other objects. The basics are fairly simple, but not paying attention to the “personality” of each extraction mechanism may cause you a lot of headache.</p>
<p>For starters, extraction is done with the <code>[</code> operator. The operator can take vectors of many types.</p>
<p>Extracting element with by integer index:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">frame1[<span class="dv">1</span>, <span class="dv">2</span>]  <span class="co"># exctract the element in the 1st row and 2nd column.</span></code></pre></div>
<pre><code>## [1] 3.841471</code></pre>
<p>Extract <strong>column</strong> by index:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">frame1[,<span class="dv">1</span>]                              </code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>Extract column by name:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">frame1[, <span class="st">&#39;sin&#39;</span>]</code></pre></div>
<pre><code>##  [1] 3.841471 3.909297 3.141120 2.243198 2.041076 2.720585 3.656987
##  [8] 3.989358 3.412118 2.455979</code></pre>
<p>As a general rule, extraction with <code>[</code> will conserve the class of the parent object. There are, however, exceptions. Notice the extraction mechanism and the class of the output in the following examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1[, <span class="st">&#39;sin&#39;</span>])  <span class="co"># extracts a column vector</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1[<span class="st">&#39;sin&#39;</span>])  <span class="co"># extracts a data frame</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1[,<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>])  <span class="co"># extracts a data frame</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1[<span class="dv">2</span>])  <span class="co"># extracts a data frame</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1[<span class="dv">2</span>, ])  <span class="co"># extract a data frame</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(frame1<span class="op">$</span>sin)  <span class="co"># extracts a column vector</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<p>The <code>subset()</code> function does the same</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">subset</span>(frame1, <span class="dt">select=</span>sin) 
<span class="kw">subset</span>(frame1, <span class="dt">select=</span><span class="dv">2</span>)
<span class="kw">subset</span>(frame1, <span class="dt">select=</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">0</span>))</code></pre></div>
<p>If you want to force the stripping of the class attribute when extracting, try the <code>[[</code> mechanism instead of <code>[</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span>frame1[<span class="dv">1</span>] <span class="co"># [ extraction</span>
b &lt;-<span class="st"> </span>frame1[[<span class="dv">1</span>]] <span class="co"># [[ extraction</span>
<span class="kw">class</span>(a)<span class="op">==</span><span class="kw">class</span>(b) <span class="co"># objects have differing classes</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a<span class="op">==</span>b <span class="co"># objects are element-wise identical </span></code></pre></div>
<pre><code>##          x
##  [1,] TRUE
##  [2,] TRUE
##  [3,] TRUE
##  [4,] TRUE
##  [5,] TRUE
##  [6,] TRUE
##  [7,] TRUE
##  [8,] TRUE
##  [9,] TRUE
## [10,] TRUE</code></pre>
<p>The different types of output classes cause different behaviors. Compare the behavior of <code>[</code> on seemingly identical objects.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">frame1[<span class="dv">1</span>][<span class="dv">1</span>]</code></pre></div>
<pre><code>##     x
## 1   1
## 2   2
## 3   3
## 4   4
## 5   5
## 6   6
## 7   7
## 8   8
## 9   9
## 10 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">frame1[[<span class="dv">1</span>]][<span class="dv">1</span>]</code></pre></div>
<pre><code>## [1] 1</code></pre>
<p>If you want to learn more about subsetting see <a href="http://adv-r.had.co.nz/Subsetting.html">Hadley’s guide</a>.</p>
</div>
<div id="augmentations-of-the-data.frame-class" class="section level2">
<h2><span class="header-section-number">3.14</span> Augmentations of the data.frame class</h2>
<p>As previously mentioned, the <code>data.frame</code> class has been extended in recent years. The best known extensions are the <code>data.table</code> and the <code>tbl</code>. For beginners, it is important to know R’s basics, so we keep focusing on data frames. For more advanced users, I recommend learning the (amazing) <code>data.table</code> syntax.</p>
</div>
<div id="data-import-and-export" class="section level2">
<h2><span class="header-section-number">3.15</span> Data Import and Export</h2>
<p>For any practical purpose, you will not be generating your data manually. R comes with many importing and exporting mechanisms which we now present. If, however, you do a lot of data “munging”, make sure to see Hadley-verse Chapter <a href="hadley.html#hadley">21</a>. If you work with MASSIVE data sets, read the Memory Efficiency Chapter <a href="memory.html#memory">15</a>.</p>
<div id="import-from-web" class="section level3">
<h3><span class="header-section-number">3.15.1</span> Import from WEB</h3>
<p>The <code>read.table</code> function is the main importing workhorse. It can import directly from the web.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">URL &lt;-<span class="st"> &#39;http://statweb.stanford.edu/~tibs/ElemStatLearn/datasets/bone.data&#39;</span>
tirgul1 &lt;-<span class="st"> </span><span class="kw">read.table</span>(URL)</code></pre></div>
<p>Always look at the imported result!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(tirgul1)</code></pre></div>
<pre><code>##      V1    V2     V3          V4
## 1 idnum   age gender      spnbmd
## 2     1  11.7   male  0.01808067
## 3     1  12.7   male  0.06010929
## 4     1 13.75   male 0.005857545
## 5     2 13.25   male  0.01026393
## 6     2  14.3   male   0.2105263</code></pre>
<p>Oh dear. <code>read.,table</code> tried to guess the structure of the input, but failed to recognize the header row. Set it manually with <code>header=TRUE</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tirgul1 &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&#39;data/bone.data&#39;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>) 
<span class="kw">head</span>(tirgul1)</code></pre></div>
</div>
<div id="import-from-clipboard" class="section level3">
<h3><span class="header-section-number">3.15.2</span> Import From Clipboard</h3>
<p>TODO:<a href="https://github.com/MilesMcBain/datapasta">datapasta</a></p>
</div>
<div id="export-as-csv" class="section level3">
<h3><span class="header-section-number">3.15.3</span> Export as CSV</h3>
<p>Let’s write a simple file so that we have something to import</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(airquality) <span class="co">#  examine the data to export</span></code></pre></div>
<pre><code>##   Ozone Solar.R Wind Temp Month Day
## 1    41     190  7.4   67     5   1
## 2    36     118  8.0   72     5   2
## 3    12     149 12.6   74     5   3
## 4    18     313 11.5   62     5   4
## 5    NA      NA 14.3   56     5   5
## 6    28      NA 14.9   66     5   6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">temp.file.name &lt;-<span class="st"> </span><span class="kw">tempfile</span>() <span class="co"># get some arbitrary file name</span>
<span class="kw">write.csv</span>(<span class="dt">x =</span> airquality, <span class="dt">file =</span> temp.file.name) <span class="co"># export</span></code></pre></div>
<p>Now let’s import the exported file. Being a .csv file, I can use <code>read.csv</code> instead of <code>read.table</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.data&lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span>temp.file.name) <span class="co"># import</span>
<span class="kw">head</span>(my.data) <span class="co"># verify import</span></code></pre></div>
<pre><code>##   X Ozone Solar.R Wind Temp Month Day
## 1 1    41     190  7.4   67     5   1
## 2 2    36     118  8.0   72     5   2
## 3 3    12     149 12.6   74     5   3
## 4 4    18     313 11.5   62     5   4
## 5 5    NA      NA 14.3   56     5   5
## 6 6    28      NA 14.9   66     5   6</code></pre>

<div class="remark">
 <span class="remark"><em>Remark. </em></span> Windows users may need to use “\” instead of “/”.
</div>

</div>
<div id="export-non-csv-files" class="section level3">
<h3><span class="header-section-number">3.15.4</span> Export non-CSV files</h3>
<p>You can export your R objects in endlessly many ways: If instead of the comma delimiter in .csv you want other column delimiters, look into <code>?write.table</code>. If you are exporting only for R users, you can consider exporting as binary objects with <code>saveRDS</code>, <code>feather::write_feather</code>, or <code>fst::write.fst</code>. See (<a href="http://www.fstpackage.org/" class="uri">http://www.fstpackage.org/</a>) for a comparison.</p>
</div>
<div id="reading-from-text-files" class="section level3">
<h3><span class="header-section-number">3.15.5</span> Reading From Text Files</h3>
<p>Some general notes on importing text files via the <code>read.table</code> function. But first, we need to know what is the active directory. Here is how to get and set R’s active directory:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>() <span class="co">#What is the working directory?</span>
<span class="kw">setwd</span>() <span class="co">#Setting the working directory in Linux</span></code></pre></div>
<p>We can now call the <code>read.table</code> function to import text files. If you care about your sanity, see <code>?read.table</code> before starting imports. Some notable properties of the function:</p>
<ul>
<li><code>read.table</code> will try to guess column separators (tab, comma, etc.)</li>
<li><code>read.table</code> will try to guess if a header row is present.</li>
<li><code>read.table</code> will convert character vectors to factors unless told not to using the <code>stringsAsFactors=FALSE</code> argument.</li>
<li>The output of <code>read.table</code> needs to be explicitly assigned to an object for it to be saved.</li>
</ul>
</div>
<div id="writing-data-to-text-files" class="section level3">
<h3><span class="header-section-number">3.15.6</span> Writing Data to Text Files</h3>
<p>The function <code>write.table</code> is the exporting counterpart of <code>read.table</code>.</p>
</div>
<div id="xlsx-files" class="section level3">
<h3><span class="header-section-number">3.15.7</span> .XLS(X) files</h3>
<p>Strongly recommended to convert to .csv in Excel, and then import as csv. If you still insist see the <strong>xlsx</strong> package.</p>
</div>
<div id="massive-files" class="section level3">
<h3><span class="header-section-number">3.15.8</span> Massive files</h3>
<p>The above importing and exporting mechanisms were not designed for massive files. An import function that were designed for large files is <a href="https://github.com/r-lib/vroom">vroom</a>. But also see the sections on the <strong>data.table</strong> package (<a href="datatable.html#datatable">4</a>), Sparse Representation (<a href="sparse.html#sparse">14</a>), and Out-of-Ram Algorithms (<a href="memory.html#memory">15</a>) for more on working with massive data files.</p>
</div>
<div id="databases" class="section level3">
<h3><span class="header-section-number">3.15.9</span> Databases</h3>
<p>R does not need to read from text files; it can read directly from a database. This is very useful since it allows the filtering, selecting and joining operations to rely on the database’s optimized algorithms. Then again, if you will only be analyzing your data with R, you are probably better of by working from a file, without the databases’ overhead. See Chapter <a href="memory.html#memory">15</a> for more on this matter.</p>
</div>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">3.16</span> Functions</h2>
<p>One of the most basic building blocks of programming is the ability of writing your own functions. A function in R, like everything else, is an object accessible using its name. We first define a simple function that sums its two arguments</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.sum &lt;-<span class="st"> </span><span class="cf">function</span>(x,y) {
  <span class="kw">return</span>(x<span class="op">+</span>y)
}
<span class="kw">my.sum</span>(<span class="dv">10</span>,<span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 12</code></pre>
<p>From this example you may notice that:</p>
<ul>
<li><p>The function <code>function</code> tells R to construct a function object.</p></li>
<li><p>Unlike some programming languages, a period (<code>.</code>) is allowed as part of an object’s name.</p></li>
<li><p>The arguments of the <code>function</code>, i.e. <code>(x,y)</code>, need to be named but we are not required to specify their class. This makes writing functions very easy, but it is also the source of many bugs, and slowness of R compared to type declaring languages (C, Fortran,Java,…).</p></li>
<li><p>A typical R function does not change objects<a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a> but rather creates new ones. To save the output of <code>my.sum</code> we will need to assign it using the <code>&lt;-</code> operator.</p></li>
</ul>
<p>Here is a (slightly) more advanced function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.sum.<span class="dv">2</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, y , <span class="dt">absolute=</span><span class="ot">FALSE</span>) {
  <span class="cf">if</span>(absolute<span class="op">==</span><span class="ot">TRUE</span>) {
    result &lt;-<span class="st"> </span><span class="kw">abs</span>(x<span class="op">+</span>y)
  }
  <span class="cf">else</span>{
    result &lt;-<span class="st"> </span>x<span class="op">+</span>y
  } 
  result
}
<span class="kw">my.sum.2</span>(<span class="op">-</span><span class="dv">10</span>,<span class="dv">2</span>,<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Things to note:</p>
<ul>
<li><p><code>if(condition){expression1} else{expression2}</code> does just what the name suggests.</p></li>
<li><p>The function will output its last evaluated expression. You don’t need to use the <code>return</code> function explicitly.</p></li>
<li><p>Using <code>absolute=FALSE</code> sets the default value of <code>absolute</code> to <code>FALSE</code>. This is overridden if <code>absolute</code> is stated explicitly in the function call.</p></li>
</ul>
<p>An important behavior of R is the <em>scoping rules</em>. This refers to the way R seeks for variables used in functions. As a rule of thumb, R will first look for variables inside the function and if not found, will search for the variable values in outer environments<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>. Think of the next example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">1</span>
b &lt;-<span class="st"> </span><span class="dv">2</span>
x &lt;-<span class="st"> </span><span class="dv">3</span>
scoping &lt;-<span class="st"> </span><span class="cf">function</span>(a,b){
  a<span class="op">+</span>b<span class="op">+</span>x
}
<span class="kw">scoping</span>(<span class="dv">10</span>,<span class="dv">11</span>)</code></pre></div>
<pre><code>## [1] 24</code></pre>
</div>
<div id="looping" class="section level2">
<h2><span class="header-section-number">3.17</span> Looping</h2>
<p>The real power of scripting is when repeated operations are done by iteration. R supports the usual <code>for</code>, <code>while</code>, and <code>repated</code> loops. Here is an embarrassingly simple example</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>){
    <span class="kw">print</span>(i)
    }</code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>A slightly more advanced example, is vector multiplication</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">result &lt;-<span class="st"> </span><span class="dv">0</span>
n &lt;-<span class="st"> </span><span class="fl">1e3</span>
x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span>n
y &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">:</span>n)<span class="op">/</span>n
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n){
  result &lt;-<span class="st"> </span>result<span class="op">+</span><span class="st"> </span>x[i]<span class="op">*</span>y[i]
}</code></pre></div>

<div class="remark">
 <span class="remark"><em>Remark. </em></span> <strong>Vector Operations</strong>: You should NEVER write your own vector and matrix products like in the previous example. Only use existing facilities such as <code>%*%</code>, <code>sum()</code>, etc.
</div>


<div class="remark">
 <span class="remark"><em>Remark. </em></span> <strong>Parallel Operations</strong>: If you already know that you will be needing to parallelize your work, get used to working with <code>foreach</code> loops in the <strong>foreach</strong> package, rather then regular <code>for</code> loops.
</div>

</div>
<div id="apply" class="section level2">
<h2><span class="header-section-number">3.18</span> Apply</h2>
<p>For applying the same function to a set of elements, there is no need to write an explicit loop. This is such an elementary operation that every programming language will provide some facility to <strong>apply</strong>, or <strong>map</strong> the function to all elements of a set. R provides several facilities to perform this. The most basic of which is <code>lapply</code> which applies a function over all elements of a list, and return a list of outputs:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">the.list &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>,<span class="st">&#39;a&#39;</span>,mean) <span class="co"># a list of 3 elements from different classes</span>
<span class="kw">lapply</span>(<span class="dt">X =</span> the.list, <span class="dt">FUN =</span> class) <span class="co"># apply the function `class` to each elements</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;numeric&quot;
## 
## [[2]]
## [1] &quot;character&quot;
## 
## [[3]]
## [1] &quot;standardGeneric&quot;
## attr(,&quot;package&quot;)
## [1] &quot;methods&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(<span class="dt">X =</span> the.list, <span class="dt">FUN =</span> class) <span class="co"># lapply with cleaned output</span></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;         &quot;character&quot;       &quot;standardGeneric&quot;</code></pre>
<p>What is the function you are using requires some arguments? One useful trick is to create your own function that takes only one argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">quantile.<span class="dv">25</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">quantile</span>(x,<span class="fl">0.25</span>)
<span class="kw">sapply</span>(USArrests, quantile.<span class="dv">25</span>)</code></pre></div>
<pre><code>##   Murder.25%  Assault.25% UrbanPop.25%     Rape.25% 
##        4.075      109.000       54.500       15.075</code></pre>
<p>What if you are applying the same function with <strong>two</strong> lists of arguments? Use <strong>mapply</strong>. The following will compute a different quantile to each column in the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">quantiles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.3</span>, <span class="fl">0.2</span>)
<span class="kw">mapply</span>(quantile, USArrests, quantiles)</code></pre></div>
<pre><code>##   Murder.10%  Assault.50% UrbanPop.30%     Rape.20% 
##         2.56       159.00        57.70        13.92</code></pre>
<p>R provides many variations on <code>lapply</code> to facilitate programming. Here is a partial list:</p>
<ul>
<li><code>sapply</code>: The same as <code>lapply</code> but tries to arrange output in a vector or matrix, and not an unstructured list.</li>
<li><code>vapply</code>: A safer version of <code>sapply</code>, where the output class is pre-specified.</li>
<li><code>apply</code>: For applying over the rows or columns of matrices.</li>
<li><code>mapply</code>: For applying functions with more than a single input.</li>
<li><code>tapply</code>: For splitting vectors and applying functions on subsets.</li>
<li><code>rapply</code>: A recursive version of <code>lapply</code>.</li>
<li><code>eapply</code>: Like <code>lapply</code>, only operates on <code>environments</code> instead of lists.</li>
<li><code>Map</code>+<code>Reduce</code>: For a <a href="https://en.wikipedia.org/wiki/Common_Lisp">Common Lisp</a> look and feel of <code>lapply</code>.</li>
<li><code>parallel::parLapply</code>: A parallel version of <code>lapply</code> from the package <strong>parallel</strong>.</li>
<li><code>parallel::parLBapply</code>: A parallel version of <code>lapply</code>, with load balancing from the package <strong>parallel</strong>.</li>
</ul>
</div>
<div id="recursion" class="section level2">
<h2><span class="header-section-number">3.19</span> Recursion</h2>
<p>The R compiler is really not designed for recursion, and you will rarely need to do so.<br />
See the RCpp Chapter <a href="rcpp.html#rcpp">19</a> for linking C code, which is better suited for recursion. If you really insist to write recursions in R, make sure to use the <code>Recall</code> function, which, as the name suggests, recalls the function in which it is place. Here is a demonstration with the Fibonacci series.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fib&lt;-<span class="cf">function</span>(n) {
    <span class="cf">if</span> (n <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>) fn&lt;-<span class="dv">1</span> 
    <span class="cf">else</span> fn &lt;-<span class="st"> </span><span class="kw">Recall</span>(n <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">Recall</span>(n <span class="op">-</span><span class="st"> </span><span class="dv">2</span>) 
    <span class="kw">return</span>(fn)
} 
<span class="kw">fib</span>(<span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
<div id="strings" class="section level2">
<h2><span class="header-section-number">3.20</span> Strings</h2>
<p>Note: this section is courtesy of Ron Sarafian.</p>
<p>Strings may appear as character vectors,files names, paths (directories), graphing elements, and more.</p>
<p>Strings can be concatenated with the super useful <code>paste</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> &quot;good&quot;</span>
b &lt;-<span class="st"> &quot;morning&quot;</span>
<span class="kw">is.character</span>(a)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(a,b)</code></pre></div>
<pre><code>## [1] &quot;good morning&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(c &lt;-<span class="st"> </span><span class="kw">paste</span>(a,b, <span class="dt">sep =</span> <span class="st">&quot;.&quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;good.morning&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(a,b,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">paste=</span><span class="st">&#39;@@@&#39;</span>, <span class="dt">collapse =</span> <span class="st">&#39;^^^^&#39;</span>)</code></pre></div>
<pre><code>## [1] &quot;good morning 1 @@@^^^^good morning 2 @@@^^^^good morning 3 @@@&quot;</code></pre>
<p>Things to note:</p>
<ul>
<li><code>sep</code> is used to separate strings.</li>
<li><code>collapse</code> is used to separate results.</li>
</ul>
<p>The <code>substr</code> function extract or replace substrings in a character vector:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">substr</span>(c, <span class="dt">start=</span><span class="dv">2</span>, <span class="dt">stop=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;ood&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">substr</span>(c, <span class="dt">start=</span><span class="dv">6</span>, <span class="dt">stop=</span><span class="dv">12</span>) &lt;-<span class="st"> &quot;evening&quot;</span></code></pre></div>
<p>The <code>grep</code> function is a very powerful tool to search for patterns in text. These patterns are called <a href="https://en.wikipedia.org/wiki/Regular_expression">regular expressions</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(d &lt;-<span class="st"> </span><span class="kw">c</span>(a,b,c))</code></pre></div>
<pre><code>## [1] &quot;good&quot;         &quot;morning&quot;      &quot;good.evening&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="dt">pattern =</span> <span class="st">&quot;good&quot;</span>,<span class="dt">x =</span> d) </code></pre></div>
<pre><code>## [1] 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;good&quot;</span>,d, <span class="dt">value=</span><span class="ot">TRUE</span>, <span class="dt">ignore.case=</span><span class="ot">TRUE</span>) </code></pre></div>
<pre><code>## [1] &quot;good&quot;         &quot;good.evening&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">grep</span>(<span class="st">&quot;([a-zA-Z]+)</span><span class="ch">\\</span><span class="st">1&quot;</span>,d, <span class="dt">value=</span><span class="ot">TRUE</span>, <span class="dt">perl=</span><span class="ot">TRUE</span>) </code></pre></div>
<pre><code>## [1] &quot;good&quot;         &quot;good.evening&quot;</code></pre>
<p>Things to note:</p>
<ul>
<li>Use <code>value=TRUE</code> to return the string itself, instead of its index.</li>
<li><code>([a-zA-Z]+)\\1</code> is a regular expression to find repeating characters. <code>perl=TRUE</code> to activate the <a href="https://en.wikipedia.org/wiki/Perl">Perl</a> “flavored” regular expressions.</li>
</ul>
<p>Use <code>gsub</code> to replace characters in a string object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;o&quot;</span>, <span class="st">&quot;q&quot;</span>, d) <span class="co"># replace the letter &quot;o&quot; with &quot;q&quot;.</span></code></pre></div>
<pre><code>## [1] &quot;gqqd&quot;         &quot;mqrning&quot;      &quot;gqqd.evening&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">gsub</span>(<span class="st">&quot;([a-zA-Z]+)</span><span class="ch">\\</span><span class="st">1&quot;</span>, <span class="st">&quot;q&quot;</span>, d, <span class="dt">perl=</span><span class="ot">TRUE</span>) <span class="co"># replace repeating characters with &quot;q&quot;.</span></code></pre></div>
<pre><code>## [1] &quot;gqd&quot;         &quot;morning&quot;     &quot;gqd.evening&quot;</code></pre>
<p>The <code>strsplit</code> allows to split string vectors to list:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a =</span> <span class="st">&quot;thiszis&quot;</span>, <span class="dt">b =</span> <span class="st">&quot;justzan&quot;</span>, <span class="dt">c =</span> <span class="st">&quot;example&quot;</span>))</code></pre></div>
<pre><code>##         a         b         c 
## &quot;thiszis&quot; &quot;justzan&quot; &quot;example&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">strsplit</span>(x, <span class="st">&quot;z&quot;</span>) <span class="co"># split x on the letter z</span></code></pre></div>
<pre><code>## $a
## [1] &quot;this&quot; &quot;is&quot;  
## 
## $b
## [1] &quot;just&quot; &quot;an&quot;  
## 
## $c
## [1] &quot;example&quot;</code></pre>
<p>Some more examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nchar</span>(x) <span class="co">#  count the nuber of characters in every element of a string vector.</span></code></pre></div>
<pre><code>## a b c 
## 7 7 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">toupper</span>(x) <span class="co"># translate characters in character vectors to upper case</span></code></pre></div>
<pre><code>##         a         b         c 
## &quot;THISZIS&quot; &quot;JUSTZAN&quot; &quot;EXAMPLE&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tolower</span>(<span class="kw">toupper</span>(x)) <span class="co"># vice verca</span></code></pre></div>
<pre><code>##         a         b         c 
## &quot;thiszis&quot; &quot;justzan&quot; &quot;example&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">letters[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>] <span class="co"># lower case letters vector</span></code></pre></div>
<pre><code>##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">LETTERS[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>] <span class="co"># upper case letters vector</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cat</span>(<span class="st">&quot;the sum of&quot;</span>, <span class="dv">1</span>, <span class="st">&quot;and&quot;</span>, <span class="dv">2</span>, <span class="st">&quot;is&quot;</span>, <span class="dv">1</span><span class="op">+</span><span class="dv">2</span>) <span class="co">#  concatenate and print strings and values</span></code></pre></div>
<pre><code>## the sum of 1 and 2 is 3</code></pre>
<p>If you need more than this, look for the <a href="https://r4ds.had.co.nz/strings.html">stringr</a> package that provides a set of internally consistent tools.</p>
</div>
<div id="dates-and-times" class="section level2">
<h2><span class="header-section-number">3.21</span> Dates and Times</h2>
<p>Note: This Section is courtesy of <a href="https://www.linkedin.com/in/ron-sarafian-4a5a95110/">Ron Sarafian</a>.</p>
<div id="dates" class="section level3">
<h3><span class="header-section-number">3.21.1</span> Dates</h3>
<p>R provides several packages for dealing with date and date/time data. We start with the <code>base</code> package.</p>
<p>R needs to be informed explicitly that an object holds dates. The <code>as.Date</code> function convert values to dates. You can pass it a <code>character</code>, a <code>numeric</code>, or a <code>POSIXct</code> (we’ll soon explain what it is).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start &lt;-<span class="st"> &quot;1948-05-14&quot;</span>
<span class="kw">class</span>(start)</code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">start &lt;-<span class="st"> </span><span class="kw">as.Date</span>(start)
<span class="kw">class</span>(start)</code></pre></div>
<pre><code>## [1] &quot;Date&quot;</code></pre>
<p>But what if our date is not in the yyyy-mm-dd format? We can tell R what is the character date’s format.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.Date</span>(<span class="st">&quot;14/5/1948&quot;</span>, <span class="dt">format=</span><span class="st">&quot;%d/%m/%Y&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;1948-05-14&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.Date</span>(<span class="st">&quot;14may1948&quot;</span>, <span class="dt">format=</span><span class="st">&quot;%d%b%Y&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;1948-05-14&quot;</code></pre>
<p>Things to note:</p>
<ul>
<li>The format of the date is specified with the <code>format=</code> argument. <code>%d</code> for day of the month, <code>/</code> for separation, <code>%m</code> for month, and <code>%Y</code> for year in four digits. See <code>?strptime</code> for more available formatting.</li>
<li>If it returns NA, then use the command <code>Sys.setlocale(&quot;LC_TIME&quot;,&quot;C&quot;)</code></li>
</ul>
<p>Many functions are content aware, and adapt their behavior when dealing with dates:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(today &lt;-<span class="st"> </span><span class="kw">Sys.Date</span>()) <span class="co"># the current date</span></code></pre></div>
<pre><code>## [1] &quot;2019-03-31&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">today <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co"># Add one day</span></code></pre></div>
<pre><code>## [1] &quot;2019-04-01&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">today <span class="op">-</span><span class="st"> </span>start <span class="co"># Diffenrece between dates</span></code></pre></div>
<pre><code>## Time difference of 25888 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(start,today)</code></pre></div>
<pre><code>## [1] &quot;1948-05-14&quot;</code></pre>
</div>
<div id="times" class="section level3">
<h3><span class="header-section-number">3.21.2</span> Times</h3>
<p>Specifying times is similar to dates, only that more formatting parameters are required. The <code>POSIXct</code> is the object class for times. It expects strings to be in the format YYYY-MM-DD HH:MM:SS. With <code>POSIXct</code> you can also specify the timezone, e.g., <code>&quot;Asia/Jerusalem&quot;</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">time1 &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()
<span class="kw">class</span>(time1)</code></pre></div>
<pre><code>## [1] &quot;POSIXct&quot; &quot;POSIXt&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">time2 &lt;-<span class="st"> </span>time1 <span class="op">+</span><span class="st"> </span><span class="dv">72</span><span class="op">*</span><span class="dv">60</span><span class="op">*</span><span class="dv">60</span> <span class="co"># add 72 hours</span>
time2<span class="op">-</span>time1</code></pre></div>
<pre><code>## Time difference of 3 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(time2<span class="op">-</span>time1)</code></pre></div>
<pre><code>## [1] &quot;difftime&quot;</code></pre>
<p>Things to note:</p>
<ul>
<li>Be careful about DST, because <code>as.POSIXct(&quot;2019-03-29 01:30&quot;)+3600</code> will not add 1 hour, but 2 with the result: <code>[1] &quot;2019-03-29 03:30:00 IDT&quot;</code></li>
</ul>
<p>Compute differences in your unit of choice:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">difftime</span>(time2,time1, <span class="dt">units =</span>  <span class="st">&quot;hour&quot;</span>)</code></pre></div>
<pre><code>## Time difference of 72 hours</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">difftime</span>(time2,time1, <span class="dt">units =</span>  <span class="st">&quot;week&quot;</span>)</code></pre></div>
<pre><code>## Time difference of 0.4285714 weeks</code></pre>
<p>Generate sequences:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dt">from =</span> time1, <span class="dt">to =</span> time2, <span class="dt">by =</span> <span class="st">&quot;day&quot;</span>) </code></pre></div>
<pre><code>## [1] &quot;2019-03-27 22:14:30 IST&quot; &quot;2019-03-28 22:14:30 IST&quot;
## [3] &quot;2019-03-29 23:14:30 IDT&quot; &quot;2019-03-30 23:14:30 IDT&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(time1, <span class="dt">by =</span> <span class="st">&quot;month&quot;</span>, <span class="dt">length.out =</span> <span class="dv">12</span>)</code></pre></div>
<pre><code>##  [1] &quot;2019-03-27 22:14:30 IST&quot; &quot;2019-04-27 22:14:30 IDT&quot;
##  [3] &quot;2019-05-27 22:14:30 IDT&quot; &quot;2019-06-27 22:14:30 IDT&quot;
##  [5] &quot;2019-07-27 22:14:30 IDT&quot; &quot;2019-08-27 22:14:30 IDT&quot;
##  [7] &quot;2019-09-27 22:14:30 IDT&quot; &quot;2019-10-27 22:14:30 IST&quot;
##  [9] &quot;2019-11-27 22:14:30 IST&quot; &quot;2019-12-27 22:14:30 IST&quot;
## [11] &quot;2020-01-27 22:14:30 IST&quot; &quot;2020-02-27 22:14:30 IST&quot;</code></pre>
</div>
<div id="lubridate-package" class="section level3">
<h3><span class="header-section-number">3.21.3</span> lubridate Package</h3>
<p>The <strong>lubridate</strong> package replaces many of the <strong>base</strong> package functionality, with a more consistent interface. You only need to specify the order of arguments, not their format:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
<span class="kw">ymd</span>(<span class="st">&quot;2017/01/31&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;2017-01-31&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mdy</span>(<span class="st">&quot;January 31st, 2017&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;2017-01-31&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dmy</span>(<span class="st">&quot;31-Jan-2017&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;2017-01-31&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ymd_hms</span>(<span class="st">&quot;2000-01-01 00:00:01&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:01 UTC&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ymd_hms</span>(<span class="st">&quot;20000101000001&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:01 UTC&quot;</code></pre>
<p>Another nice thing in <strong>lubridate</strong>, is that periods can be created with a number of friendly constructor functions that you can combine time objects. E.g.:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seconds</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;1S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">minutes</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>))</code></pre></div>
<pre><code>## [1] &quot;2M 0S&quot; &quot;3M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hours</span>(<span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;4H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">days</span>(<span class="dv">5</span>)</code></pre></div>
<pre><code>## [1] &quot;5d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">months</span>(<span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>))</code></pre></div>
<pre><code>## [1] &quot;6m 0d 0H 0M 0S&quot; &quot;7m 0d 0H 0M 0S&quot; &quot;8m 0d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">weeks</span>(<span class="dv">9</span>)</code></pre></div>
<pre><code>## [1] &quot;63d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">years</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] &quot;10y 0m 0d 0H 0M 0S&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(t &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;20000101000001&quot;</span>))</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:01 UTC&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t <span class="op">+</span><span class="st"> </span><span class="kw">seconds</span>(<span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:02 UTC&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t <span class="op">+</span><span class="st"> </span><span class="kw">minutes</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)) <span class="op">+</span><span class="st"> </span><span class="kw">years</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## [1] &quot;2010-01-01 00:02:01 UTC&quot; &quot;2010-01-01 00:03:01 UTC&quot;</code></pre>
<p>And you can also extract and assign the time components:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:01 UTC&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">second</span>(t)</code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">second</span>(t) &lt;-<span class="st"> </span><span class="dv">26</span>
t</code></pre></div>
<pre><code>## [1] &quot;2000-01-01 00:00:26 UTC&quot;</code></pre>
<p>Analyzing temporal data is different than actually storing it. If you are interested in time-series analysis, try the <strong>tseries</strong>, <strong>forecast</strong> and <strong>zoo</strong> packages.</p>
</div>
</div>
<div id="complex-objects" class="section level2">
<h2><span class="header-section-number">3.22</span> Complex Objects</h2>
<p>Say you have a list with many elements, and you want to inspect this list. You can do it using the <em>Environment</em> pane in RStudio (Ctrl+8), or using the <strong>str</strong> function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">complex.object &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">7</span>, <span class="st">&#39;hello&#39;</span>, <span class="kw">list</span>(<span class="dt">a=</span><span class="dv">7</span>,<span class="dt">b=</span><span class="dv">8</span>,<span class="dt">c=</span><span class="dv">9</span>), <span class="dt">FOO=</span>read.csv)
<span class="kw">str</span>(complex.object)</code></pre></div>
<pre><code>## List of 4
##  $    : num 7
##  $    : chr &quot;hello&quot;
##  $    :List of 3
##   ..$ a: num 7
##   ..$ b: num 8
##   ..$ c: num 9
##  $ FOO:function (file, header = TRUE, sep = &quot;,&quot;, quote = &quot;\&quot;&quot;, dec = &quot;.&quot;, 
##     fill = TRUE, comment.char = &quot;&quot;, ...)</code></pre>
<p>Some (very) advanced users may want a deeper look into object. Try the <a href="https://github.com/r-lib/lobstr/blob/master/README.md">lobstr</a> package, or the <strong>.Internal(inspect(…))</strong> function described <a href="https://www.brodieg.com/2019/02/18/an-unofficial-reference-for-internal-inspect/">here</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>,<span class="dv">10</span>)
<span class="kw">.Internal</span>(<span class="kw">inspect</span>(x))</code></pre></div>
<pre><code>## @1516cd08 14 REALSXP g0c2 [NAM(3)] (len=2, tl=0) 7,10</code></pre>
</div>
<div id="vectors-and-matrix-products" class="section level2">
<h2><span class="header-section-number">3.23</span> Vectors and Matrix Products</h2>
<p>This section is courtesy of Ron Sarafian.</p>
<p>If you are operating with numeric vectors, or matrices, you may want to compute products. You can easily write your own R loops, but it is much more efficient to use the built-in operations.</p>

<div class="definition">
<span id="def:matrix-product" class="definition"><strong>Definition 3.1  (Matrix Product)  </strong></span>The matrix-product between matrix <span class="math inline">\(n \times m\)</span> matrix <span class="math inline">\(A\)</span>, and <span class="math inline">\(m \times p\)</span> matrix <span class="math inline">\(B\)</span>, is a <span class="math inline">\(n \times p\)</span> matrix <span class="math inline">\(C\)</span>, where: <span class="math display">\[c_{i,j}:=\sum_{k=1}^m a_{i,k} b_{k,j}\]</span>
</div>

<p>Vectors can be seen as single row/column matrices. We can thus use matrix products to define the following:</p>

<div class="definition">
<span id="def:dot-product" class="definition"><strong>Definition 3.2  (Dot Product)  </strong></span>The dot-product, a.k.a. scalar-product, or inner-product, between row-vectors <span class="math inline">\(x:=(x_1,\dots,x_n)\)</span> and <span class="math inline">\(y:=(y_1,\dots,y_n)\)</span> is defined as the matrix product between the <span class="math inline">\(1 \times n\)</span> matrix <span class="math inline">\(x&#39;\)</span>, and the <span class="math inline">\(n \times 1\)</span> matrix y: <span class="math display">\[x&#39;y:= \sum_i x_i y_i\]</span>
</div>


<div class="definition">
<span id="def:outer-product" class="definition"><strong>Definition 3.3  (Outer Product)  </strong></span>The outer product between row-vectors <span class="math inline">\(x:=(x_1,\dots,x_n)\)</span> and <span class="math inline">\(y:=(y_1,\dots,y_n)\)</span> is defined as the matrix product between the <span class="math inline">\(n \times 1\)</span> matrix <span class="math inline">\(x\)</span>, and the <span class="math inline">\(1 \times n\)</span> matrix <span class="math inline">\(y&#39;\)</span>: <span class="math display">\[(xy&#39;)_{i,j}:=x_i \, y_j\]</span>
</div>

<p>Matrix products are computed with the <code>%*%</code> operator:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">4</span>) 
y &lt;-<span class="st"> </span><span class="kw">exp</span>(<span class="op">-</span>x) 
<span class="kw">t</span>(x) <span class="op">%*%</span><span class="st"> </span>y <span class="co"># Dot product.</span></code></pre></div>
<pre><code>##           [,1]
## [1,] -3.298627</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%*%</span><span class="st"> </span>y <span class="co"># Dot product.</span></code></pre></div>
<pre><code>##           [,1]
## [1,] -3.298627</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">crossprod</span>(x,y) <span class="co"># Dot product.</span></code></pre></div>
<pre><code>##           [,1]
## [1,] -3.298627</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">crossprod</span>(<span class="kw">t</span>(x),y) <span class="co"># Outer product.</span></code></pre></div>
<pre><code>##            [,1]       [,2]       [,3]       [,4]
## [1,] -1.5412664 -0.5513476 -1.7862644 -0.5988587
## [2,]  0.6075926  0.2173503  0.7041748  0.2360800
## [3,] -1.8496379 -0.6616595 -2.1436542 -0.7186764
## [4,]  0.4348046  0.1555399  0.5039206  0.1689432</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">crossprod</span>(<span class="kw">t</span>(x),<span class="kw">t</span>(y)) <span class="co"># Outer product.</span></code></pre></div>
<pre><code>##            [,1]       [,2]       [,3]       [,4]
## [1,] -1.5412664 -0.5513476 -1.7862644 -0.5988587
## [2,]  0.6075926  0.2173503  0.7041748  0.2360800
## [3,] -1.8496379 -0.6616595 -2.1436542 -0.7186764
## [4,]  0.4348046  0.1555399  0.5039206  0.1689432</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(y) <span class="co"># Outer product</span></code></pre></div>
<pre><code>##            [,1]       [,2]       [,3]       [,4]
## [1,] -1.5412664 -0.5513476 -1.7862644 -0.5988587
## [2,]  0.6075926  0.2173503  0.7041748  0.2360800
## [3,] -1.8496379 -0.6616595 -2.1436542 -0.7186764
## [4,]  0.4348046  0.1555399  0.5039206  0.1689432</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%o%</span><span class="st"> </span>y <span class="co"># Outer product</span></code></pre></div>
<pre><code>##            [,1]       [,2]       [,3]       [,4]
## [1,] -1.5412664 -0.5513476 -1.7862644 -0.5988587
## [2,]  0.6075926  0.2173503  0.7041748  0.2360800
## [3,] -1.8496379 -0.6616595 -2.1436542 -0.7186764
## [4,]  0.4348046  0.1555399  0.5039206  0.1689432</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">outer</span>(x,y) <span class="co"># Outer product</span></code></pre></div>
<pre><code>##            [,1]       [,2]       [,3]       [,4]
## [1,] -1.5412664 -0.5513476 -1.7862644 -0.5988587
## [2,]  0.6075926  0.2173503  0.7041748  0.2360800
## [3,] -1.8496379 -0.6616595 -2.1436542 -0.7186764
## [4,]  0.4348046  0.1555399  0.5039206  0.1689432</code></pre>
<p>Things to note:</p>
<ul>
<li>The definition of the matrix product has to do with the view of a matrix as a linear operator, and not only a table with numbers. Pick up any linear algebra book to understand why it is defined this way.</li>
<li>Vectors are matrices. The dot product, is a matrix product where <span class="math inline">\(m=1\)</span>.</li>
<li><code>*</code> is an element-wise product, whereas <code>%*%</code> is a dot product.</li>
<li>While not specifying whether the vectors are horizontal or vertical, R treats the operation as <span class="math inline">\((1 \times n) * (n \times 1)\)</span>.</li>
<li><code>t()</code> is the vector/ matrix transpose.</li>
</ul>
<p>Now for matrix multiplication:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(x &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="dv">5</span>))</code></pre></div>
<pre><code>## [1] 1 1 1 1 1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(A &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">data =</span> <span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,<span class="dv">5</span>), <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">ncol =</span> <span class="dv">5</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)) <span class="co"># </span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    1    2    3    4    5
## [2,]    1    2    3    4    5
## [3,]    1    2    3    4    5
## [4,]    1    2    3    4    5
## [5,]    1    2    3    4    5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%*%</span><span class="st"> </span>A <span class="co"># (1X5) * (5X5) =&gt; (1X5)</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]    5   10   15   20   25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">A <span class="op">%*%</span><span class="st"> </span>x <span class="co"># (5X5) * (5X1) =&gt; (1X5)</span></code></pre></div>
<pre><code>##      [,1]
## [1,]   15
## [2,]   15
## [3,]   15
## [4,]   15
## [5,]   15</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="fl">0.5</span> <span class="op">*</span><span class="st"> </span>A </code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]  0.5    1  1.5    2  2.5
## [2,]  0.5    1  1.5    2  2.5
## [3,]  0.5    1  1.5    2  2.5
## [4,]  0.5    1  1.5    2  2.5
## [5,]  0.5    1  1.5    2  2.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">A <span class="op">%*%</span><span class="st"> </span><span class="kw">t</span>(A) <span class="co"># Gram matrix</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5]
## [1,]   55   55   55   55   55
## [2,]   55   55   55   55   55
## [3,]   55   55   55   55   55
## [4,]   55   55   55   55   55
## [5,]   55   55   55   55   55</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t</span>(x) <span class="op">%*%</span><span class="st"> </span>A <span class="op">%*%</span><span class="st"> </span>x <span class="co"># Quadratic form</span></code></pre></div>
<pre><code>##      [,1]
## [1,]   75</code></pre>
<p>Can I write these functions myself? Yes! But a pure-R implementation will be much slower than <code>%*%</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.crossprod &lt;-<span class="st"> </span><span class="cf">function</span>(x,y){
  result &lt;-<span class="st"> </span><span class="dv">0</span>
  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(x)) result &lt;-<span class="st"> </span>result <span class="op">+</span><span class="st"> </span>x[i]<span class="op">*</span>y[i]
  result
}
x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">1e8</span>)
y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="fl">1e8</span>)
<span class="kw">system.time</span>(a1 &lt;-<span class="st"> </span><span class="kw">my.crossprod</span>(x,y))</code></pre></div>
<pre><code>##    user  system elapsed 
##   6.126   0.000   6.128</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(a2 &lt;-<span class="st"> </span><span class="kw">sum</span>(x<span class="op">*</span>y))</code></pre></div>
<pre><code>##    user  system elapsed 
##   0.394   0.182   0.576</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(a3 &lt;-<span class="st"> </span><span class="kw">c</span>(x<span class="op">%*%</span>y))</code></pre></div>
<pre><code>##    user  system elapsed 
##   0.357   0.000   0.357</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(a1,a2)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(a1,a3)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(a2,a3)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="bibliographic-notes-1" class="section level2">
<h2><span class="header-section-number">3.24</span> Bibliographic Notes</h2>
<p>There are endlessly many introductory texts on R. For a list of free resources see <a href="http://stats.stackexchange.com/questions/138/free-resources-for-learning-r">CrossValidated</a>. I personally recommend the official introduction <span class="citation">Venables et al. (<a href="#ref-venables2004introduction">2004</a>)</span>, <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.pdf">available online</a>, or anything else Bill Venables writes.</p>
<p>For Importing and Exporting see (<a href="https://cran.r-project.org/doc/manuals/r-release/R-data.html" class="uri">https://cran.r-project.org/doc/manuals/r-release/R-data.html</a>). For working with databases see (<a href="https://rforanalytics.wordpress.com/useful-links-for-r/odbc-databases-for-r/" class="uri">https://rforanalytics.wordpress.com/useful-links-for-r/odbc-databases-for-r/</a>). For a little intro on time-series objects in R see <a href="http://www.christophsax.com/2018/05/15/tsbox/">Cristoph Sax’s blog</a>. For working with strings see <a href="http://www.gastonsanchez.com/r4strings/">Gaston Sanchez’s book</a>. For advanced R programming see <span class="citation">Wickham (<a href="#ref-wickham2014advanced">2014</a>)</span>, <a href="http://adv-r.had.co.nz/">available online</a>, or anything else Hadley Wickham writes. For a curated list of recommended packages see <a href="https://github.com/rstudio/RStartHere/blob/master/README.md">here</a>.</p>
</div>
<div id="practice-yourself" class="section level2">
<h2><span class="header-section-number">3.25</span> Practice Yourself</h2>
<ol style="list-style-type: decimal">
<li><p>Load the package <strong>MASS</strong>. That was easy. Now load <strong>ggplot2</strong>, after looking into <code>install.pacakges()</code>.</p></li>
<li><p>Save the numbers 1 to 1,000,000 (<code>1e6</code>) into an object named <code>object</code>.</p></li>
<li><p>Write a function that computes the mean of its input. Write a version that uses <code>sum()</code>, and another that uses a <code>for</code> loop and the summation <code>+</code>. Try checking which is faster using <code>system.time</code>. Is the difference considerable? Ask me about it in class.</p></li>
<li><p>Write a function that returns <code>TRUE</code> if a number is divisible by 13, <code>FALSE</code> if not, and a nice warning to the user if the input is not an integer number.</p></li>
<li><p>Apply the previous function to all the numbers in <code>object</code>. Try using a <code>for</code> loop, but also a mapping/apply function.</p></li>
<li><p>Make a matrix of random numbers using <code>A &lt;- matrix(rnorm(40), ncol=10, nrow=4)</code>. Compute the mean of each column. Do it using your own loop and then do the same with <code>lapply</code> or <code>apply</code>.</p></li>
<li><p>Make a data frame (<code>dataA</code>) with three columns, and 100 rows. The first column with 100 numbers generated from the <span class="math inline">\(\mathcal{N}(10,1)\)</span> distribution, second column with samples from <span class="math inline">\(Poiss(\lambda=4)\)</span>. The third column contains only <code>1</code>.<br />
Make another data frame (<code>dataB</code>) with three columns and 100 rows. Now with <span class="math inline">\(\mathcal{N}(10,0.5^2)\)</span>, <span class="math inline">\(Poiss(\lambda=4)\)</span> and <code>2</code>. Combine the two data frames into an object named <code>dataAB</code> with <code>rbind</code>. Make a scatter plot of <code>dataAB</code> where the x-axes is the first column, the y-axes is the second and define the shape of the points to be the third column.</p></li>
<li>In a sample generated of 1,000 observations from the <span class="math inline">\(\mathcal{N}(10,1)\)</span> distribution:
<ol style="list-style-type: decimal">
<li>What is the proportion of samples smaller than <span class="math inline">\(12.4\)</span> ?</li>
<li>What is the <span class="math inline">\(0.23\)</span> percentile of the sample?</li>
</ol></li>
<li><p>Nothing like cleaning a dataset, to practice your R basics. Have a look at <a href="https://makingnoiseandhearingthings.com/2018/04/19/datasets-for-data-cleaning-practice/">RACHAEL TATMAN</a> collected several datasets which BADLY need some cleansing.</p></li>
</ol>
<p>You can also self practice with DataCamp’s <a href="https://www.datacamp.com/courses/free-introduction-to-r">Intoroduction to R</a> course, or go directly to exercising with <a href="https://www.r-exercises.com/start-here-to-learn-r/">R-exercises</a>.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-venables2004introduction">
<p>Venables, William N, David M Smith, R Development Core Team, and others. 2004. “An Introduction to R.” Network Theory Limited.</p>
</div>
<div id="ref-wickham2014advanced">
<p>Wickham, Hadley. 2014. <em>Advanced R</em>. CRC Press.</p>
</div>
<div id="ref-wilkinson1973symbolic">
<p>Wilkinson, GN, and CE Rogers. 1973. “Symbolic Description of Factorial Models for Analysis of Variance.” <em>Applied Statistics</em>. JSTOR, 392–99.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>S and S-Plus used to save objects on disk. Working from RAM has advantages and disadvantages. More on this in Chapter <a href="memory.html#memory">15</a>.<a href="basics.html#fnref1">↩</a></p></li>
<li id="fn2"><p>Taken from <a href="http://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html" class="uri">http://cran.r-project.org/web/packages/magrittr/vignettes/magrittr.html</a><a href="basics.html#fnref2">↩</a></p></li>
<li id="fn3"><p>R uses a <a href="https://en.wikipedia.org/wiki/Three-valued_logic"><strong>three</strong> valued logic</a> where a missing value (NA) is neither TRUE, nor FALSE.<a href="basics.html#fnref3">↩</a></p></li>
<li id="fn4"><p>This is a classical <em>functional programming</em> paradigm. If you want an object oriented flavor of R programming, see Hadley’s <a href="http://adv-r.had.co.nz/OO-essentials.html">Advanced R book</a>.<a href="basics.html#fnref4">↩</a></p></li>
<li id="fn5"><p>More formally, this is called <a href="https://darrenjw.wordpress.com/2011/11/23/lexical-scope-and-function-closures-in-r/">Lexical Scoping</a>.<a href="basics.html#fnref5">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="datatable.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/25-r-basics.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["Rcourse.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
